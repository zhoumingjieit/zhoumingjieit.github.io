<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/12/index.html">
<meta property="og:site_name" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.f6a68c.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/images/avatar.png" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">Jack_zhou</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/images/avatar.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">Jack_zhou</h1>
			</hgroup>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="#" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/tags/随笔/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-linux命令df和du" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/19/linux命令df和du/">df和du使用和区别</a>
    </h1>
  

        
        <a href="/2017/05/19/linux命令df和du/" class="archive-article-date">
  	<time datetime="2017-05-19T02:52:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-19</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="df命令："><a href="#df命令：" class="headerlink" title="df命令："></a>df命令：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df - report file system disk space usage</div></pre></td></tr></table></figure>
<h5 id="命令格式："><a href="#命令格式：" class="headerlink" title="命令格式："></a>命令格式：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df [OPTION]... [FILE]...</div></pre></td></tr></table></figure>
<h5 id="命令选项："><a href="#命令选项：" class="headerlink" title="命令选项："></a>命令选项：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="_">-a</span>  ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；</div><div class="line">-k  ：以 KBytes 的容量显示各文件系统；</div><div class="line">-m  ：以 MBytes 的容量显示各文件系统；</div><div class="line">-h  ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；</div><div class="line">-H  ：以 M=1000K 取代 M=1024K 的进位方式；</div><div class="line">-T  ：连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；</div><div class="line">-i  ：不用硬盘容量，而以 inode 的数量来显示</div></pre></td></tr></table></figure>
<h5 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># df [-ahikHTm] [目录或文件名]</span></div><div class="line">选项与参数：</div><div class="line"><span class="_">-a</span>  ：列出所有的文件系统，包括系统特有的 /proc 等文件系统；</div><div class="line">-k  ：以 KBytes 的容量显示各文件系统；</div><div class="line">-m  ：以 MBytes 的容量显示各文件系统；</div><div class="line">-h  ：以人们较易阅读的 GBytes, MBytes, KBytes 等格式自行显示；</div><div class="line">-H  ：以 M=1000K 取代 M=1024K 的进位方式；</div><div class="line">-T  ：连同该 partition 的 filesystem 名称 (例如 ext3) 也列出；</div><div class="line">-i  ：不用硬盘容量，而以 inode 的数量来显示</div><div class="line"></div><div class="line">范例一：将系统内所有的 filesystem 列出来！</div><div class="line">[root@www ~]<span class="comment"># df</span></div><div class="line">Filesystem      1K-blocks      Used Available Use% Mounted on</div><div class="line">/dev/hdc2         9920624   3823112   5585444  41% /</div><div class="line">/dev/hdc3         4956316    141376   4559108   4% /home</div><div class="line">/dev/hdc1          101086     11126     84741  12% /boot</div><div class="line">tmpfs              371332         0    371332   0% /dev/shm</div><div class="line"><span class="comment"># 在 Linux 底下如果 df 没有加任何选项，那么默认会将系统内所有的 </span></div><div class="line"><span class="comment"># (不含特殊内存内的文件系统与 swap) 都以 1 Kbytes 的容量来列出来！</span></div><div class="line"><span class="comment"># 至于那个 /dev/shm 是与内存有关的挂载，先不要理他！</span></div><div class="line"></div><div class="line">范例二：将容量结果以易读的容量格式显示出来</div><div class="line">[root@www ~]<span class="comment"># df -h</span></div><div class="line">Filesystem            Size  Used Avail Use% Mounted on</div><div class="line">/dev/hdc2             9.5G  3.7G  5.4G  41% /</div><div class="line">/dev/hdc3             4.8G  139M  4.4G   4% /home</div><div class="line">/dev/hdc1              99M   11M   83M  12% /boot</div><div class="line">tmpfs                 363M     0  363M   0% /dev/shm</div><div class="line"><span class="comment"># 不同于范例一，这里会以 G/M 等容量格式显示出来，比较容易看啦！</span></div><div class="line"></div><div class="line">范例三：将系统内的所有特殊文件格式及名称都列出来</div><div class="line">[root@www ~]<span class="comment"># df -aT</span></div><div class="line">Filesystem    Type 1K-blocks    Used Available Use% Mounted on</div><div class="line">/dev/hdc2     ext3   9920624 3823112   5585444  41% /</div><div class="line">proc          proc         0       0         0   -  /proc</div><div class="line">sysfs        sysfs         0       0         0   -  /sys</div><div class="line">devpts      devpts         0       0         0   -  /dev/pts</div><div class="line">/dev/hdc3     ext3   4956316  141376   4559108   4% /home</div><div class="line">/dev/hdc1     ext3    101086   11126     84741  12% /boot</div><div class="line">tmpfs        tmpfs    371332       0    371332   0% /dev/shm</div><div class="line">none   binfmt_misc         0       0         0   -  /proc/sys/fs/binfmt_misc</div><div class="line">sunrpc  rpc_pipefs         0       0         0   -  /var/lib/nfs/rpc_pipefs</div><div class="line"><span class="comment"># 系统里面其实还有很多特殊的文件系统存在的。那些比较特殊的文件系统几乎</span></div><div class="line"><span class="comment"># 都是在内存当中，例如 /proc 这个挂载点。因此，这些特殊的文件系统</span></div><div class="line"><span class="comment"># 都不会占据硬盘空间喔！ ^_^</span></div><div class="line"></div><div class="line">范例四：将 /etc 底下的可用的磁盘容量以易读的容量格式显示</div><div class="line">[root@www ~]<span class="comment"># df -h /etc</span></div><div class="line">Filesystem            Size  Used Avail Use% Mounted on</div><div class="line">/dev/hdc2             9.5G  3.7G  5.4G  41% /</div><div class="line"><span class="comment"># 这个范例比较有趣一点啦，在 df 后面加上目录或者是文件时， df</span></div><div class="line"><span class="comment"># 会自动的分析该目录或文件所在的 partition ，并将该 partition 的容量显示出来，</span></div><div class="line"><span class="comment"># 所以，您就可以知道某个目录底下还有多少容量可以使用了！ ^_^</span></div><div class="line"></div><div class="line">范例五：将目前各个 partition 当中可用的 inode 数量列出</div><div class="line">[root@www ~]<span class="comment"># df -ih </span></div><div class="line">Filesystem            Inodes   IUsed   IFree IUse% Mounted on</div><div class="line">/dev/hdc2               2.5M    147K    2.3M    6% /</div><div class="line">/dev/hdc3               1.3M      46    1.3M    1% /home</div><div class="line">/dev/hdc1                26K      34     26K    1% /boot</div><div class="line">tmpfs                    91K       1     91K    1% /dev/shm</div><div class="line"><span class="comment"># 这个范例则主要列出可用的 inode 剩余量与总容量。分析一下与范例一的关系，</span></div><div class="line"><span class="comment"># 你可以清楚的发现到，通常 inode 的数量剩余都比 block 还要多呢</span></div></pre></td></tr></table></figure>
<h5 id="范例输出说明："><a href="#范例输出说明：" class="headerlink" title="范例输出说明："></a>范例输出说明：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Filesystem：代表该文件系统是在哪个 partition ，所以列出装置名称；</div><div class="line">1k-blocks：说明底下的数字单位是 1KB 呦！可利用 -h 或 -m 来改变容量；</div><div class="line">Used：顾名思义，就是使用掉的硬盘空间啦！</div><div class="line">Available：也就是剩下的磁盘空间大小；</div><div class="line">Use%：就是磁盘的使用率啦！如果使用率高达 90% 以上时， 最好需要注意一下了，免得容量不足造成系统问题喔！</div><div class="line">      (例如最容易被灌爆的 /var/spool/mail 这个放置邮件的磁盘)</div><div class="line">Mounted on：就是磁盘挂载的目录所在啦！(挂载点啦！)</div></pre></td></tr></table></figure>
<h5 id="补充说明："><a href="#补充说明：" class="headerlink" title="补充说明："></a>补充说明：</h5><p>由于 df 主要读取的数据几乎都是针对一整个文件系统，因此读取的范围主要是在 Superblock 内的信息， 所以这个命令显示结果的速度非常的快速！在显示的结果中你需要特别留意的是那个根目录的剩余容量！ 因为我们所有的数据都是由根目录衍生出来的，因此当根目录的剩余容量剩下 0 时，那你的 Linux 可能就问题很大了。</p>
<p>另外需要注意的是，如果使用 -a 这个参数时，系统会出现 /proc 这个挂载点，但是里面的东西都是 0 ，不要紧张！<br>/proc 的东西都是 Linux 系统所需要加载的系统数据，而且是挂载在『内存当中』的， 所以当然没有占任何的硬盘空间啰！</p>
<p>至于那个 /dev/shm/ 目录，其实是利用内存虚拟出来的磁盘空间！ 由于是透过内存仿真出来的磁盘，因此你在这个目录底下创建任何数据文件时，访问速度是非常快速的！(在内存内工作) 不过，也由于他是内存仿真出来的，因此这个文件系统的大小在每部主机上都不一样，而且创建的东西在下次启动时就消失了！ 因为是在内存中嘛！</p>
<h3 id="du命令："><a href="#du命令：" class="headerlink" title="du命令："></a>du命令：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du - estimate file space usage</div></pre></td></tr></table></figure>
<h5 id="命令格式：-1"><a href="#命令格式：-1" class="headerlink" title="命令格式："></a>命令格式：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">du [OPTION]... [FILE]...</div></pre></td></tr></table></figure>
<h5 id="命令选项：-1"><a href="#命令选项：-1" class="headerlink" title="命令选项："></a>命令选项：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="_">-a</span>  ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。</div><div class="line">-h  ：以人们较易读的容量格式 (G/M) 显示；</div><div class="line"><span class="_">-s</span>  ：列出总量而已，而不列出每个各别的目录占用容量；</div><div class="line">-S  ：不包括子目录下的总计，与 <span class="_">-s</span> 有点差别。</div><div class="line">-k  ：以 KBytes 列出容量显示；</div><div class="line">-m  ：以 MBytes 列出容量显示；</div></pre></td></tr></table></figure>
<h5 id="实例：-1"><a href="#实例：-1" class="headerlink" title="实例："></a>实例：</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">[root@www ~]<span class="comment"># du [-ahskm] 文件或目录名称</span></div><div class="line">选项与参数：</div><div class="line"><span class="_">-a</span>  ：列出所有的文件与目录容量，因为默认仅统计目录底下的文件量而已。</div><div class="line">-h  ：以人们较易读的容量格式 (G/M) 显示；</div><div class="line"><span class="_">-s</span>  ：列出总量而已，而不列出每个各别的目录占用容量；</div><div class="line">-S  ：不包括子目录下的总计，与 <span class="_">-s</span> 有点差别。</div><div class="line">-k  ：以 KBytes 列出容量显示；</div><div class="line">-m  ：以 MBytes 列出容量显示；</div><div class="line"></div><div class="line">范例一：列出目前目录下的所有文件容量</div><div class="line">[root@www ~]<span class="comment"># du</span></div><div class="line">8       ./<span class="built_in">test</span>4     &lt;==每个目录都会列出来</div><div class="line">8       ./<span class="built_in">test</span>2</div><div class="line">....中间省略....</div><div class="line">12      ./.gconfd   &lt;==包括隐藏文件的目录</div><div class="line">220     .           &lt;==这个目录(.)所占用的总量</div><div class="line"><span class="comment"># 直接输入 du 没有加任何选项时，则 du 会分析『目前所在目录』</span></div><div class="line"><span class="comment"># 的文件与目录所占用的硬盘空间。但是，实际显示时，仅会显示目录容量(不含文件)，</span></div><div class="line"><span class="comment"># 因此 . 目录有很多文件没有被列出来，所以全部的目录相加不会等于 . 的容量喔！</span></div><div class="line"><span class="comment"># 此外，输出的数值数据为 1K 大小的容量单位。</span></div><div class="line"></div><div class="line">范例二：同范例一，但是将文件的容量也列出来</div><div class="line">[root@www ~]<span class="comment"># du -a</span></div><div class="line">12      ./install.log.syslog   &lt;==有文件的列表了</div><div class="line">8       ./.bash_logout</div><div class="line">8       ./<span class="built_in">test</span>4</div><div class="line">8       ./<span class="built_in">test</span>2</div><div class="line">....中间省略....</div><div class="line">12      ./.gconfd</div><div class="line">220     .</div><div class="line"></div><div class="line">范例三：检查根目录底下每个目录所占用的容量</div><div class="line">[root@www ~]<span class="comment"># du -sm /*</span></div><div class="line">7       /bin</div><div class="line">6       /boot</div><div class="line">.....中间省略....</div><div class="line">0       /proc</div><div class="line">.....中间省略....</div><div class="line">1       /tmp</div><div class="line">3859    /usr     &lt;==系统初期最大就是他了啦！</div><div class="line">77      /var</div><div class="line"><span class="comment"># 这是个很常被使用的功能～利用通配符 * 来代表每个目录，</span></div><div class="line"><span class="comment"># 如果想要检查某个目录下，哪个次目录占用最大的容量，可以用这个方法找出来</span></div><div class="line"><span class="comment"># 值得注意的是，如果刚刚安装好 Linux 时，那么整个系统容量最大的应该是 /usr </span></div><div class="line"><span class="comment"># 而 /proc 虽然有列出容量，但是那个容量是在内存中，不占硬盘空间。</span></div></pre></td></tr></table></figure>
<h5 id="补充说明：-1"><a href="#补充说明：-1" class="headerlink" title="补充说明："></a>补充说明：</h5><p>与 df 不一样的是，du 这个命令其实会直接到文件系统内去搜寻所有的文件数据， 所以上述第三个范例命令的运行会运行一小段时间！此外，在默认的情况下，容量的输出是以 KB 来设计的， 如果你想要知道目录占了多少 MB ，那么就使用 -m 这个参数即可啰！而， 如果你只想要知道该目录占了多少容量的话，使用 -s 就可以啦！</p>
<p>至于 -S 这个选项部分，由于 du 默认会将所有文件的大小均列出，因此假设你在 /etc 底下使用 du 时， 所有的文件大小，包括 /etc 底下的次目录容量也会被计算一次。然后最终的容量 (/etc) 也会加总一次， 因此很多朋友都会误会 du 分析的结果不太对劲。所以啰，如果想要列出某目录下的全部数据， 或许也可以加上 -S 的选项，减少次目录的加总喔！</p>
<h3 id="du和df原理"><a href="#du和df原理" class="headerlink" title="du和df原理"></a>du和df原理</h3><p>du命令会对待统计文件逐个调用fstat这个系统调用，获取文件大小。它的数据是基于文件获取的，所以有很大的灵活性，不一定非要针对一个分区，可以跨越多个分区操作。如果针对的目录中文件很多，du速度就会很慢了。</p>
<p>df命令使用的事statfs这个系统调用，直接读取分区的超级块信息获取分区使用情况。它的数据是基于分区元数据的，所以只能针对整个分区。由于df直接读取超级块，所以运行速度不受文件多少影响。</p>
<h3 id="df-和-du的区别："><a href="#df-和-du的区别：" class="headerlink" title="df 和 du的区别："></a>df 和 du的区别：</h3><p> du命令通过将指定文件系统中所有的目录、符号链接和文件使用的块数累加得到该文件系统使用的总块数；而df命令通过查看文件系统磁盘块分配图得出总块数与剩余块数。文件系统分配其中的一些磁盘块用来记录它自身的一些数据，如i节点，磁盘分布图，间接块，超级块等。这些数据对大多数用户级的程序来说是不可见的，通常称为Meta Data。 du命令是用户级的程序，它不考虑MetaData，而df命令则查看文件系统的磁盘分配图并考虑MetaData。df命令获得真正的文件系统数据，而du命令只查看文件系统的部分情况</p>
<h5 id="关于df和du的输出差别原文解释如下："><a href="#关于df和du的输出差别原文解释如下：" class="headerlink" title="关于df和du的输出差别原文解释如下："></a>关于df和du的输出差别原文解释如下：</h5><p>Problem Definition</p>
<hr>
<p>This section gives the technical explanation of why du and df sometimes report different totals of disk space usage.</p>
<p>When a program that is running in the background writes to a file while the process is running, the file to which this process is writing is deleted. Running df and du shows a discrepancy in the amount of disk space usage. The df command shows a higher value.</p>
<p>Explanation Summary</p>
<hr>
<p>When you open a file, you get a pointer. Subsequent writes to this file references this file pointer. The write call does not check to see if the file is there or not. It just writes to the specified number of characters starting at a predetermined location. Regardless of whether the file exist or not, disk blocks are used by the write operation.</p>
<p>The df command reports the number of disk blocks used, while du goes through the file structure and reports the number of blocks used by each directory. As far as du is concerned, the file used by the process does not exist, so it does not report blocks used by this phantom file. But df keeps track of disk blocks used, and it reports the blocks used by this phantom file.</p>
<h4 id="df和du的输出的情况举例："><a href="#df和du的输出的情况举例：" class="headerlink" title="df和du的输出的情况举例："></a>df和du的输出的情况举例：</h4><h5 id="常见的df和du不一致情况就是文件删除的问题"><a href="#常见的df和du不一致情况就是文件删除的问题" class="headerlink" title="常见的df和du不一致情况就是文件删除的问题"></a>常见的df和du不一致情况就是文件删除的问题</h5><p>当一个文件被删除后，在文件系统 目录中已经不可见了，所以du就不会再统计它了。然而如果此时还有运行的进程持有这个已经被删除了的文件的句柄，那么这个文件就不会真正在磁盘中被删除， 分区超级块中的信息也就不会更改。这样df仍旧会统计这个被删除了的文件。</p>
<h4 id="工作中需要注意的地方"><a href="#工作中需要注意的地方" class="headerlink" title="工作中需要注意的地方"></a>工作中需要注意的地方</h4><p>(1)当出现du和df差距很大的情况时，考虑是否是有删除文件未完成造成的，方法是lsof命令，然后停止相关进程即可。</p>
<p>(2)可以使用清空文件的方式来代替删除文件，方式是:echo &gt; myfile.iso。</p>
<p>(3)对于经常发生删除问题的日志文件，以改名、清空、删除的顺序操作。</p>
<p>(4)除了rm外，有些命令会间接的删除文件，如gzip命令完成后会删除原来的文件，为了避免删除问题，压缩前先确认没有进程打开该文件</p>
<p>另一个表现出du与df命令不同之处的例子如下：<br>如果用户删除了一个正在运行的应用所打开的某个目录下的文件，则du命令返回的值显示出减去了该文件后的目录的大小。<br>但df命令并不显示减去该文件后的大小。直到该运行的应用关闭了这个打开的文件，df返回的值才显示出减去了该文件后的文件系统的使用情况。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">command</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/19/linux命令df和du/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-linux文本处理工具" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/18/linux文本处理工具/">linux文本处理工具(wc、cut、sort、uniq、tr)</a>
    </h1>
  

        
        <a href="/2017/05/18/linux文本处理工具/" class="archive-article-date">
  	<time datetime="2017-05-18T02:50:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-文本处理工具：wc、cut、sort、uniq"><a href="#ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-ensp-文本处理工具：wc、cut、sort、uniq" class="headerlink" title="&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;文本处理工具：wc、cut、sort、uniq"></a>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;文本处理工具：wc、cut、sort、uniq</h3><h3 id="抽取文本cut"><a href="#抽取文本cut" class="headerlink" title="抽取文本cut"></a>抽取文本cut</h3><p>★ cut：文本内容切割<br>&ensp;&ensp;&ensp;&ensp;cut命令就是将文件中的内容按照某种分隔符进行切割，然后取出指定的字段；<br>原内容或者原文件不受影响；<br>☉用法：<br>&ensp;&ensp;&ensp;&ensp;cut [OPTION]… [FILE]…<br>☉选项：<br>◆-d DELIMITER：指明分隔符，默认tab；<br>◆-f FILEDS：指明需要取出的字段；<br>&ensp;&ensp;&ensp;&ensp;#：第#个字段<br>&ensp;&ensp;&ensp;&ensp;#,#[,#]：离散的多个字段，例如1,3,6<br>&ensp;&ensp;&ensp;&ensp;#-#：连续的多个字段<br>混合使用：1-3,7<br>◆–output-delimiter=STRING：指定输出结果的分隔符（也可以用tr命令转换分隔符）；<br>◆-c：按字符切割</p>
<h4 id="演示"><a href="#演示" class="headerlink" title="演示:"></a>演示:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># tail -5 /etc/passwd</span></div><div class="line">abc7:x:1023:1023::/home/abc7:/bin/bash</div><div class="line">abc8:x:1024:1024::/home/abc8:/bin/bash</div><div class="line">abc9:x:1025:1025::/home/abc9:/bin/bash</div><div class="line">abc10:x:1026:1026::/home/abc10:/bin/bash</div><div class="line">apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin</div><div class="line"><span class="comment"># 以":"为分隔符，取出第1列，第3列，第7列</span></div><div class="line">[root@centos7 ~]<span class="comment"># tail -5 /etc/passwd|cut -d: -f1,3,7</span></div><div class="line">abc7:1023:/bin/bash</div><div class="line">abc8:1024:/bin/bash</div><div class="line">abc9:1025:/bin/bash</div><div class="line">abc10:1026:/bin/bash</div><div class="line">apache:48:/sbin/nologin</div><div class="line"><span class="comment"># 指定输出分隔符</span></div><div class="line">[root@centos7 ~]<span class="comment"># tail -5 /etc/passwd|cut -d: -f1,3,7 --output-delimiter=--</span></div><div class="line">abc7--1023--/bin/bash</div><div class="line">abc8--1024--/bin/bash</div><div class="line">abc9--1025--/bin/bash</div><div class="line">abc10--1026--/bin/bash</div><div class="line">apache--48--/sbin/nologin</div><div class="line">[root@centos7 ~]<span class="comment"># tail -5 /etc/passwd|cut -d: -f1,3,7|tr -s ':' '--' # 把分隔符:替换成--</span></div><div class="line">abc7-1023-/bin/bash</div><div class="line">abc8-1024-/bin/bash</div><div class="line">abc9-1025-/bin/bash</div><div class="line">abc10-1026-/bin/bash</div><div class="line">apache-48-/sbin/nologin</div><div class="line"><span class="comment"># 按字符进行切割</span></div><div class="line">[root@centos7 ~]<span class="comment"># head -5 /etc/passwd|cut -c1-5</span></div><div class="line">root:</div><div class="line">bin:x</div><div class="line">daemo</div><div class="line">adm:x</div><div class="line">lp:x:</div></pre></td></tr></table></figure>
<h3 id="合并文件paste"><a href="#合并文件paste" class="headerlink" title="合并文件paste"></a>合并文件paste</h3><p>★ paste：合并两个文件同行号的列到一行<br>☉用法：<br>&ensp;&ensp;&ensp;&ensp;paste [OPTION]… [FILE]…<br>☉选项：<br>&ensp;&ensp;&ensp;&ensp;-d：分隔符:指定分隔符，默认用TAB<br>&ensp;&ensp;&ensp;&ensp;-s：所有行合成一行显示</p>
<h4 id="演示："><a href="#演示：" class="headerlink" title="演示："></a>演示：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># cat f1</span></div><div class="line">aaaaaaa</div><div class="line">bbbbbbb</div><div class="line">ccccccc</div><div class="line">ddddddd</div><div class="line">[root@centos7 ~]<span class="comment"># cat f2</span></div><div class="line">anaconda-ks.cfg</div><div class="line">Desktop</div><div class="line">Discuz</div><div class="line">Documents</div><div class="line">[root@centos7 ~]<span class="comment"># paste f1 f2</span></div><div class="line">aaaaaaa	anaconda-ks.cfg</div><div class="line">bbbbbbb	Desktop</div><div class="line">ccccccc	Discuz</div><div class="line">ddddddd	Documents</div><div class="line">[root@centos7 ~]<span class="comment"># paste -s f1 f2</span></div><div class="line">aaaaaaa	bbbbbbb	ccccccc	ddddddd</div><div class="line">anaconda-ks.cfg	Desktop	Discuz	Documents</div></pre></td></tr></table></figure>
<h3 id="收集文本统计数据工具wc"><a href="#收集文本统计数据工具wc" class="headerlink" title="收集文本统计数据工具wc"></a>收集文本统计数据工具wc</h3><p>★ wc：字符统计<br>☉用法：<br>&ensp;&ensp;&ensp;&ensp;wc [OPTION]… [FILE]…<br>☉选项：<br>&ensp;&ensp;&ensp;&ensp;-l：linx，统计行数；<br>&ensp;&ensp;&ensp;&ensp;-w：words，统计单词总数；<br>&ensp;&ensp;&ensp;&ensp;-c：character，统计字符总数；</p>
<h4 id="演示：-1"><a href="#演示：-1" class="headerlink" title="演示："></a>演示：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># wc -l /etc/passwd</span></div><div class="line">51 /etc/passwd</div><div class="line">[root@centos7 ~]<span class="comment"># wc -w /etc/passwd</span></div><div class="line">73 /etc/passwd</div><div class="line">[root@centos7 ~]<span class="comment"># wc -c /etc/passwd</span></div><div class="line">2293 /etc/passwd</div><div class="line">[root@centos7 ~]<span class="comment"># wc /etc/passwd</span></div><div class="line">  51   73 2293 /etc/passwd</div></pre></td></tr></table></figure>
<h3 id="文本排序工具sort"><a href="#文本排序工具sort" class="headerlink" title="文本排序工具sort"></a>文本排序工具sort</h3><p>★ sort：文本排序<br>&ensp;&ensp;&ensp;&ensp;把整理过的文本对列进行排序，显示在STDOUT，不改变原始文件。<br>☉用法：<br>&ensp;&ensp;&ensp;&ensp;sort [OPTION]… [FILE]…<br>☉选项：<br>&ensp;&ensp;&ensp;&ensp;-n：以数值大小进行排序；<br>&ensp;&ensp;&ensp;&ensp;-r：逆序；<br>&ensp;&ensp;&ensp;&ensp;-f：忽略字符大小写；<br>&ensp;&ensp;&ensp;&ensp;-t delimiter：字段分隔符；<br>&ensp;&ensp;&ensp;&ensp;-k #：以指定字段为标准排序,指定从哪个位置开始排序；<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;-k 1,1 用逗号来分隔字段，表示从第一个字段开始排序到第一个字段结束<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;-k 1.1,3.3 用点号来分隔字符，表示第一个字段的第一个字符开始排序到第三个字段的第三个字符结束；<br>&ensp;&ensp;&ensp;&ensp;-u：重复的行只保留一份（除去连续重复的行，只保留一次）</p>
<h4 id="演示：-2"><a href="#演示：-2" class="headerlink" title="演示："></a>演示：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># head -5 /etc/passwd</span></div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">You have new mail <span class="keyword">in</span> /var/spool/mail/root</div><div class="line"><span class="comment"># -t 指定分隔符，-k 指明字段，-n 按数值大小进行排序，-r 逆序排列</span></div><div class="line">[root@centos7 ~]<span class="comment"># head -5 /etc/passwd|sort -t: -k3 -n</span></div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">You have new mail <span class="keyword">in</span> /var/spool/mail/root</div><div class="line">[root@centos7 ~]<span class="comment"># head -5 /etc/passwd|sort -t: -k3 -nr</span></div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/passwd|cut -d: -f7|sort</span></div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/bash</div><div class="line">/bin/sync</div><div class="line">/sbin/halt</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/nologin</div><div class="line">/sbin/shutdown</div><div class="line"><span class="comment"># 除去连续重复的行，只保留一次</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/passwd|cut -d: -f7|sort -u</span></div><div class="line">/bin/bash</div><div class="line">/bin/sync</div><div class="line">/sbin/halt</div><div class="line">/sbin/nologin</div><div class="line">/sbin/shutdown</div><div class="line"><span class="comment"># 实现的功能同sort -u</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/passwd|cut -d: -f7|sort|uniq</span></div><div class="line">/bin/bash</div><div class="line">/bin/sync</div><div class="line">/sbin/halt</div><div class="line">/sbin/nologin</div><div class="line">/sbin/shutdown</div></pre></td></tr></table></figure>
<p><img src="\images\sort.png" alt="sort"></p>
<h3 id="uniq命令"><a href="#uniq命令" class="headerlink" title="uniq命令"></a>uniq命令</h3><p>★ uniq：去重，及统计重复次数<br>&ensp;&ensp;&ensp;&ensp;从输入中删除重复的前后相接的行（相邻的行）<br>☉用法：<br>&ensp;&ensp;&ensp;&ensp;uniq [OPTION]… [INPUT [OUTPUT]]<br>☉选项：<br>&ensp;&ensp;&ensp;&ensp;-c：显示每行重复出现的次数；<br>&ensp;&ensp;&ensp;&ensp;-d：仅显示重复过的行；<br>&ensp;&ensp;&ensp;&ensp;-u：仅显示不曾重复的行；<br>注意：<br>&ensp;&ensp;&ensp;&ensp;连续且完全相同的方为重复<br>&ensp;&ensp;&ensp;&ensp;常和 sort 命令一起配合使用（sort -u 和 sort|uniq相同）：如：sort userlist.txt | uniq -c</p>
<h4 id="演示-1"><a href="#演示-1" class="headerlink" title="演示:"></a>演示:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/init.d/functions|more</span></div><div class="line"><span class="comment"># -*-Shell-script-*-</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># functions	This file contains functions to be used by most or all</span></div><div class="line"><span class="comment">#		shell scripts in the /etc/init.d directory.</span></div><div class="line"><span class="comment">#</span></div><div class="line"></div><div class="line">TEXTDOMAIN=initscripts</div><div class="line"></div><div class="line"><span class="comment"># Make sure umask is sane</span></div><div class="line"><span class="built_in">umask</span> 022</div><div class="line"></div><div class="line"><span class="comment"># Set up a default search path.</span></div><div class="line">PATH=<span class="string">"/sbin:/usr/sbin:/bin:/usr/bin"</span></div><div class="line"><span class="built_in">export</span> PATH</div><div class="line"><span class="comment"># 把文件中所有的非字母的用回车换行符“\n”替换并压缩，-c 为取[:alpha:]的补集，-s 为压缩</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/init.d/functions |tr -cs '[:alpha:]' '\n'|more</span></div><div class="line"></div><div class="line">Shell</div><div class="line">script</div><div class="line"><span class="built_in">functions</span></div><div class="line">This</div><div class="line">file</div><div class="line">contains</div><div class="line"><span class="built_in">functions</span></div><div class="line">to</div><div class="line">be</div><div class="line">used</div><div class="line">by</div><div class="line">most</div><div class="line">or</div><div class="line">all</div><div class="line">shell</div><div class="line">scripts</div><div class="line"><span class="keyword">in</span></div><div class="line">the</div><div class="line"><span class="comment"># uniq -c 去重并显示每行重复的次数</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/init.d/functions |tr -cs '[:alpha:]' '\n'|sort|uniq -c</span></div><div class="line">      1 </div><div class="line">     20 a</div><div class="line">      5 A</div><div class="line">      1 aA</div><div class="line">      1 abnormally</div><div class="line">      5 action</div><div class="line">      1 active</div><div class="line">      1 ActiveState</div><div class="line">      1 adjust</div><div class="line">      1 alive</div><div class="line">      2 all</div><div class="line">      1 already</div><div class="line">      2 and</div><div class="line">      1 And</div><div class="line">      3 any</div><div class="line">      1 anywhere</div><div class="line"><span class="comment"># 按重复的次数进行数值大小排序</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/init.d/functions |tr -cs '[:alpha:]' '\n'|sort|uniq -c|sort -n</span></div><div class="line">      1 </div><div class="line">      1 aA</div><div class="line">      1 abnormally</div><div class="line">      1 active</div><div class="line">      1 ActiveState</div><div class="line">      1 adjust</div><div class="line">      1 alive</div><div class="line">      1 already</div><div class="line">      1 And</div><div class="line">      1 anywhere</div><div class="line">      1 apply</div></pre></td></tr></table></figure>
<h3 id="diff和patch命令"><a href="#diff和patch命令" class="headerlink" title="diff和patch命令"></a>diff和patch命令</h3><p>★ diff：比较两个文件之间的区别<br>★ patch：复制对文件的改变；<br>&ensp;&ensp;&ensp;&ensp;diff命令的输出被保存在一种叫做“补丁”的文件中<br>&ensp;&ensp;&ensp;&ensp;使用-u选项来输出“统一的（unified）”diff格式文件，最适用于补丁文件。<br>&ensp;&ensp;&ensp;&ensp;patch命令复制在其它文件中进行的改变（要谨慎使用 ！）<br>&ensp;&ensp;&ensp;&ensp;用-b选项来自动备份改变了的文件</p>
<h4 id="演示-2"><a href="#演示-2" class="headerlink" title="演示:"></a>演示:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># cat f1</span></div><div class="line">aaaaaaa</div><div class="line">bbbbbbb</div><div class="line">ccccccc</div><div class="line">ddddddd</div><div class="line">[root@centos7 ~]<span class="comment"># cat f2</span></div><div class="line">aaaaaaa</div><div class="line">bbbbbbb</div><div class="line">ccccccc</div><div class="line">dddhhhd</div><div class="line"><span class="comment"># diff 命令 注明第4行不同</span></div><div class="line">[root@centos7 ~]<span class="comment"># diff f1 f2</span></div><div class="line">4c4</div><div class="line">&lt; ddddddd</div><div class="line">---</div><div class="line">&gt; dddhhhd</div></pre></td></tr></table></figure>
<h3 id="练习"><a href="#练习" class="headerlink" title="练习:"></a>练习:</h3><p>1.找出ifconfig命令结果中本机的所有IPv4地址<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># ifconfig|head -2</span></div><div class="line">eno16777736: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</div><div class="line">        inet 192.168.2.140  netmask 255.255.255.0  broadcast 192.168.2.255</div><div class="line">[root@centos7 ~]<span class="comment"># ifconfig|head -2|tail -1</span></div><div class="line">        inet 192.168.2.140  netmask 255.255.255.0  broadcast 192.168.2.255</div><div class="line">[root@centos7 ~]<span class="comment"># ifconfig|head -2|tail -1|tr -s ' ' ':'</span></div><div class="line">:inet:192.168.2.140:netmask:255.255.255.0:broadcast:192.168.2.255</div><div class="line">[root@centos7 ~]<span class="comment"># ifconfig|head -2|tail -1|tr -s ' ' ':'|cut -d: -f3</span></div><div class="line">192.168.2.140</div></pre></td></tr></table></figure></p>
<p>2.查出分区空间使用率的最大百分比值<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># df</span></div><div class="line">Filesystem            1K-blocks    Used Available Use% Mounted on</div><div class="line">/dev/mapper/vgos-root  20961280 1750936  19210344   9% /</div><div class="line">devtmpfs                 490220       0    490220   0% /dev</div><div class="line">tmpfs                    500664       0    500664   0% /dev/shm</div><div class="line">tmpfs                    500664    6820    493844   2% /run</div><div class="line">tmpfs                    500664       0    500664   0% /sys/fs/cgroup</div><div class="line">/dev/sda1                508588  110000    398588  22% /boot</div><div class="line">tmpfs                    100136       0    100136   0% /run/user/0</div><div class="line">[root@centos7 ~]<span class="comment"># df|tr -s ' ' ':'</span></div><div class="line">Filesystem:1K-blocks:Used:Available:Use%:Mounted:on</div><div class="line">/dev/mapper/vgos-root:20961280:1750936:19210344:9%:/</div><div class="line">devtmpfs:490220:0:490220:0%:/dev</div><div class="line">tmpfs:500664:0:500664:0%:/dev/shm</div><div class="line">tmpfs:500664:6820:493844:2%:/run</div><div class="line">tmpfs:500664:0:500664:0%:/sys/fs/cgroup</div><div class="line">/dev/sda1:508588:110000:398588:22%:/boot</div><div class="line">tmpfs:100136:0:100136:0%:/run/user/0</div><div class="line">[root@centos7 ~]<span class="comment"># df|tr -s ' ' ':'|cut -d: -f5</span></div><div class="line">Use%</div><div class="line">9%</div><div class="line">0%</div><div class="line">0%</div><div class="line">2%</div><div class="line">0%</div><div class="line">22%</div><div class="line">0%</div><div class="line">[root@centos7 ~]<span class="comment"># df|tr -s ' ' ':'|cut -d: -f5|tr -d '%'</span></div><div class="line">Use</div><div class="line">9</div><div class="line">0</div><div class="line">0</div><div class="line">2</div><div class="line">0</div><div class="line">22</div><div class="line">0</div></pre></td></tr></table></figure></p>
<p>3.统计当前连接本机的每个远程主机IP的连接数，并按从大到小排序<br><img src="\images\tr.png" alt="tr"></p>
<h3 id="tr命令"><a href="#tr命令" class="headerlink" title="tr命令"></a>tr命令</h3><p>&ensp;&ensp;&ensp;&ensp;通过使用 tr，您可以非常容易地实现 sed 的许多最基本功能。您可以将 tr 看作为 sed 的（极其）简化的变体：它可以用一个字符来替换另一个字符，或者可以完全除去一些字符。您也可以用它来除去重复字符。这就是所有 tr 所能够做的。<br>&ensp;&ensp;&ensp;&ensp;tr用来从标准输入中通过替换或删除操作进行字符转换。tr主要用于删除文件中控制字符或进行字符转换。使用tr时要转换两个字符串：字符串1用于查询，字符串2用于处理各种转换。tr刚执行时，字符串1中的字符被映射到字符串2中的字符，然后转换操作开始。<br>1.带有最常用选项的tr命令格式为：<br>&ensp;&ensp;&ensp;&ensp;tr -c -d -s [“string1_to_translate_from”] [“string2_to_translate_to”] &lt; input-file<br>&ensp;&ensp;&ensp;&ensp;-c 用字符串1中字符集的补集替换此字符集，要求字符集为ASCII。<br>&ensp;&ensp;&ensp;&ensp;-d 删除字符串1中所有输入字符。<br>&ensp;&ensp;&ensp;&ensp;-s 删除所有重复出现字符序列，只保留第一个；即将重复出现字符串压缩为一个字符串。<br>&ensp;&ensp;&ensp;&ensp;input-file是转换文件名。虽然可以使用其他格式输入，但这种格式最常用。<br>2.字符范围<br>指定字符串1或字符串2的内容时，只能使用单字符或字符串范围或列表。<br>&ensp;&ensp;&ensp;&ensp;[a-z] a-z内的字符组成的字符串。<br>&ensp;&ensp;&ensp;&ensp;[A-Z] A-Z内的字符组成的字符串。<br>&ensp;&ensp;&ensp;&ensp;[0-9] 数字串。<br>&ensp;&ensp;&ensp;&ensp;\octal 一个三位的八进制数，对应有效的ASCII字符。<br>&ensp;&ensp;&ensp;&ensp;[O乘号n] 表示字符O重复出现指定次数n。因此[O乘号2]匹配OO的字符串。<br>tr中特定控制字符的不同表达方式<br>速记符含义八进制方式<br>&ensp;&ensp;&ensp;&ensp;\a Ctrl-G  铃声\007<br>&ensp;&ensp;&ensp;&ensp;\b Ctrl-H  退格符\010<br>&ensp;&ensp;&ensp;&ensp;\f Ctrl-L  走行换页\014<br>&ensp;&ensp;&ensp;&ensp;\n Ctrl-J  新行\012<br>&ensp;&ensp;&ensp;&ensp;\r Ctrl-M  回车\015<br>&ensp;&ensp;&ensp;&ensp;\t Ctrl-I  tab键\011<br>&ensp;&ensp;&ensp;&ensp;\v Ctrl-X  \030</p>
<h4 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h4>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">linux中文本处理工具</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/18/linux文本处理工具/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-linux命令find" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/14/linux命令find/">find命令详解</a>
    </h1>
  

        
        <a href="/2017/05/14/linux命令find/" class="archive-article-date">
  	<time datetime="2017-05-14T02:52:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-14</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="find命令"><a href="#find命令" class="headerlink" title="find命令"></a>find命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">find - search <span class="keyword">for</span> files <span class="keyword">in</span> a directory hierarchy</div><div class="line">实时查找工具，通过遍历指定起始路径下文件系统层级结构完成文件查找</div></pre></td></tr></table></figure>
<h4 id="用法："><a href="#用法：" class="headerlink" title="用法："></a>用法：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">find [options] [查找起始路径] [查找条件] [处理动作]</div><div class="line">查找起始路径：指定具体查找目标起始路径，默认为当前目录</div><div class="line">查找条件：指定查找标准，可以根据文件名、大小、类型、从属关系、权限等等标准进行查找，默认为找出指定路径下的所有文件</div><div class="line">处理动作：对查找到的结果执行的操作</div></pre></td></tr></table></figure>
<h4 id="查找条件分类："><a href="#查找条件分类：" class="headerlink" title="查找条件分类："></a>查找条件分类：</h4><p>根据文件名查找：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-name	    “filename”	对文件名做精确匹配</div><div class="line">-iname	    “filename”	文件名匹配时不区分大小写</div><div class="line">            文件名通配	利用通配符(*,?,[]…….)</div></pre></td></tr></table></figure></p>
<p>根据文件从属关系查找：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">-user	    username	查找属主指定用户的所有文件</div><div class="line">-group	  groupname	查找属组指定组的所有文件</div><div class="line">-uid	    uid	        查找属主指定的UID的所有文件</div><div class="line">-gid	    gid	        查找属组指定的GID的所有文件</div><div class="line">-nouser	    查找没有属主的文件</div><div class="line">-nogroup    查找没有属组的文件</div></pre></td></tr></table></figure></p>
<p>根据文件类型查找：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">-type	文件类</div><div class="line">           f	普通文件</div><div class="line">           d	目录</div><div class="line">           c	字符设备</div><div class="line">           b	块设备</div><div class="line">           l	符号链接</div><div class="line">           p	FIFO</div><div class="line">           s	套接字</div></pre></td></tr></table></figure></p>
<p>根据文件大小查找：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-size   [+|-]num	</div><div class="line">          k	以字节为单位查找</div><div class="line">          M	以M为单位查找</div><div class="line">          G	以G为单位查找</div><div class="line">说明：num 表示查找num-1到num之间大小; -num 表示比num-1小的文件; +num 表示比num和比num大的文件</div></pre></td></tr></table></figure></p>
<p>根据时间戳查找：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">以天为单位：</div><div class="line">-mtime	  num	    文件内容最后一次被修改的时间</div><div class="line">-ctime	  num	    文件元数据（例如权限或所有权）最后一次改变的时间</div><div class="line">-atime	  num	    用户最近一次访问文件的时间</div><div class="line">以分钟为单位：</div><div class="line">-mmin	  num	    文件内容最后一次被修改的时间</div><div class="line">-cmin	  num	    文件元数据（例如权限或所有权）最后一次改变的时间</div><div class="line">-amin	  num	    用户最近一次访问文件的时间</div></pre></td></tr></table></figure></p>
<p>根据权限查找：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-perm	[/|-]mode</div><div class="line">        mode	精确匹配</div><div class="line">        /mode	任意一类用户(u,g,o)中的权限位(r,w,x)中的任一位匹配MODE即满足条件</div><div class="line">        -mode	任意一类用户(u,g,o)中的权限位(r,w,x)中的任一位同时匹配MODE时才符合条件</div></pre></td></tr></table></figure></p>
<p>组合条件测试：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">与：<span class="_">-a</span> 默认组合逻辑</div><div class="line">或：-o 只符合二者其中之一即可</div><div class="line">非：-not,! 和指定条件相反</div></pre></td></tr></table></figure></p>
<h4 id="处理动作："><a href="#处理动作：" class="headerlink" title="处理动作："></a>处理动作：</h4><p>&ensp;&ensp;&ensp;&ensp;-print：输出至标准输出，默认动作</p>
<p>&ensp;&ensp;&ensp;&ensp;-ls：输出文件的详细信息</p>
<p>&ensp;&ensp;&ensp;&ensp;-delete：删除查找到的文件</p>
<p>&ensp;&ensp;&ensp;&ensp;-fls /path/somefile：把查找到的文件的长格式信息保存到指定文件</p>
<p>&ensp;&ensp;&ensp;&ensp;-ok command {} \; 对查找到的每个文件执行由command表示的命令，每次操作由用户确认</p>
<p>&ensp;&ensp;&ensp;&ensp;-exec command {} \; 对查找到的每个文件执行由command表示的命令，不需要用户确认</p>
<p>&ensp;&ensp;说明：{} 表示前面找到的内容，\ 转义作用。</p>
<h5 id="xargs命令："><a href="#xargs命令：" class="headerlink" title="xargs命令："></a>xargs命令：</h5><p>&ensp;&ensp;&ensp;&ensp;xargs命令把从stdin接收到的数据重新格式化，再将其作为参数提供给其他命令。</p>
<h4 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">1、查找/var目录下属主为root，且属组为mail的所有文件或目录；</div><div class="line"></div><div class="line">2、查找/usr目录下不属于root、bin或hadoop的所有文件或目录；</div><div class="line"></div><div class="line">3、查找/etc目录下最周一周内其内容修改过，同时属主不为root，也不是hadoop的文件或目录；</div><div class="line"></div><div class="line">4、查找当前系统上没有属主或属组，且最近一个周内曾被访问过的文件或目录；</div><div class="line"></div><div class="line">5、查找/etc目录下大于1M且类型为普通文件的所有文件；</div><div class="line"></div><div class="line">6、查找/etc目录下所有用户都没有写权限的文件；</div><div class="line"></div><div class="line">7、查找/etc目录下至少有一类用户没有执行权限的文件；</div><div class="line"></div><div class="line">8、查找/etc/init.d目录下，所有用户都有执行权限，且其它用户有写权限的文件；</div></pre></td></tr></table></figure>
<h5 id="xargs的用法："><a href="#xargs的用法：" class="headerlink" title="xargs的用法："></a>xargs的用法：</h5><h4 id="实例：-1"><a href="#实例：-1" class="headerlink" title="实例："></a>实例：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">样例文件：</div><div class="line">[root@CentOS6 ~]<span class="comment"># cat example.txt </span></div><div class="line">1 2 3 4 5 6 7</div><div class="line">8 9 10 11</div><div class="line">12 13</div><div class="line">14</div><div class="line"></div><div class="line">1.将多行输入转换成单行输出</div><div class="line">[root@CentOS6 ~]<span class="comment"># cat example.txt | xargs</span></div><div class="line">1 2 3 4 5 6 7 8 9 10 11 12 13 14</div><div class="line"></div><div class="line">2.将单行输入转换成多行输出</div><div class="line">（-n 指定每行输出最大数量）</div><div class="line">[root@CentOS6 ~]<span class="comment"># cat example.txt | xargs -n 3</span></div><div class="line">1 2 3</div><div class="line">4 5 6</div><div class="line">7 8 9</div><div class="line">10 11 12</div><div class="line">13 14</div><div class="line"></div><div class="line">3.用自己的定界符分隔参数（默认空格）.</div><div class="line">(X为指定分隔符)</div><div class="line">[root@CentOS6 ~]<span class="comment"># echo "splitXsplitXsplitXsplit" |xargs -d X</span></div><div class="line">split split split split</div><div class="line">[root@CentOS6 ~]<span class="comment"># echo "splitXsplitXsplitXsplit" |xargs -d X -n 2</span></div><div class="line">split split</div><div class="line">split split</div><div class="line"></div><div class="line">4.读取stdin,将格式化参数传递给命令</div><div class="line">脚本内容：</div><div class="line">vi cecho.sh</div><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment">#cecho.sh</span></div><div class="line"><span class="built_in">echo</span> $*<span class="string">'#'</span></div><div class="line">当参数被传递给文件cecho.sh后，它将这些参数打印出来，并以<span class="comment">#字符作为结尾</span></div><div class="line">[root@CentOS6 ~]<span class="comment"># /bin/sh ./cecho.sh arg1</span></div><div class="line">arg1<span class="comment">#</span></div><div class="line">[root@CentOS6 ~]<span class="comment"># /bin/sh ./cecho.sh arg1 arg2 arg3</span></div><div class="line">arg1 arg2 arg3<span class="comment">#</span></div><div class="line"></div><div class="line">a.以下用xargs来实现：</div><div class="line">[root@CentOS6 ~]<span class="comment"># cat args.txt</span></div><div class="line">arg1</div><div class="line">arg2</div><div class="line">arg3</div><div class="line">[root@CentOS6 ~]<span class="comment"># cat args.txt | xargs /bin/sh ./cecho.sh     </span></div><div class="line">arg1 arg2 arg3<span class="comment">#</span></div><div class="line">[root@CentOS6 ~]<span class="comment"># cat args.txt | xargs -n 1 /bin/sh ./cecho.sh</span></div><div class="line">arg1<span class="comment">#</span></div><div class="line">arg2<span class="comment">#</span></div><div class="line">arg3<span class="comment">#</span></div><div class="line"></div><div class="line">b.指定一个固定格式输出</div><div class="line">[root@CentOS6 ~]<span class="comment"># cat args.txt | xargs -I &#123;&#125; /bin/sh ./cecho.sh -p &#123;&#125; -1</span></div><div class="line">-p arg1 -1<span class="comment">#</span></div><div class="line">-p arg2 -1<span class="comment">#</span></div><div class="line">-p arg3 -1<span class="comment">#</span></div><div class="line">说明：-I &#123;&#125; 指定了替换字符串，对于每一个命令数，字符串｛｝都会被从stdin读取到的参数替换掉。使用-I的时候，命令以循环的方式执行。如果有3个对数，那么命令就会连同&#123;&#125;一起被执行3次，在每一次执行中&#123;&#125;都会被替换为相应的对数</div></pre></td></tr></table></figure>
<h4 id="find与cp和mv配合使用："><a href="#find与cp和mv配合使用：" class="headerlink" title="find与cp和mv配合使用："></a>find与cp和mv配合使用：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">find . -maxdepth 1 -type d -name <span class="string">"jack"</span> -exec mv -t /tmp/ &#123;&#125; +</div><div class="line"></div><div class="line">find . -maxdepth 1 -type d -name <span class="string">"jack"</span> -exec mv &#123;&#125; /tmp/ \;</div><div class="line"></div><div class="line">find . -maxdepth 1 -type f -name <span class="string">"var*"</span> -exec mv -t /tmp &#123;&#125; +</div><div class="line"></div><div class="line">find . -maxdepth 1 -type f -name <span class="string">"var*"</span> -exec mv &#123;&#125; /tmp/ \;</div><div class="line"></div><div class="line"></div><div class="line">find . -maxdepth 1 -type d -name <span class="string">"jack"</span> -exec cp -at /tmp &#123;&#125; +</div><div class="line"></div><div class="line">find . -maxdepth 1 -type d -name <span class="string">"jack"</span> -exec cp <span class="_">-a</span> &#123;&#125; /tmp/ \;</div><div class="line"></div><div class="line">find . -maxdepth 1 -type f -name <span class="string">"var*"</span> -exec cp -at /tmp &#123;&#125; +</div><div class="line"></div><div class="line">find . -maxdepth 1 -type f -name <span class="string">"var*"</span> -exec cp <span class="_">-a</span> &#123;&#125; /tmp/ \;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">find . -maxdepth 1 -type f -name <span class="string">"var*"</span>|xargs cp -at /tmp/</div><div class="line"></div><div class="line">find . -maxdepth 1 -type d -name <span class="string">"jack"</span>|xargs cp -at /tmp/</div><div class="line"></div><div class="line">find . -maxdepth 1 -type f -name <span class="string">"var*"</span>|xargs mv -t /tmp/</div><div class="line"></div><div class="line">find . -maxdepth 1 -type d -name <span class="string">"jack"</span>|xargs mv -t /tmp/</div></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">command</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/14/linux命令find/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-linux系统管理之文件权限" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/13/linux系统管理之文件权限/">文件权限管理</a>
    </h1>
  

        
        <a href="/2017/05/13/linux系统管理之文件权限/" class="archive-article-date">
  	<time datetime="2017-05-13T02:52:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-13</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><h3 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">以/etc/passwd文件为例：</div><div class="line">[root@centos7 ~]<span class="comment"># ls -l /etc/passwd</span></div><div class="line">-rw-r--r--. 1 root root 1080 May 11 21:05 /etc/passwd</div></pre></td></tr></table></figure>
<p>文件的相关属性说明：</p>
<table>
<thead>
<tr>
<th style="text-align:center">文件类型</th>
<th style="text-align:center">属主权限</th>
<th style="text-align:center">属组</th>
<th style="text-align:center">其它用户权限</th>
<th style="text-align:center">硬链接数</th>
<th style="text-align:center">属主</th>
<th style="text-align:center">属组</th>
<th style="text-align:left">文件大小</th>
<th style="text-align:center">文件修改时间</th>
<th style="text-align:center">文件名</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center">rw-</td>
<td style="text-align:center">r–</td>
<td style="text-align:center">r–</td>
<td style="text-align:center">1</td>
<td style="text-align:center">root</td>
<td style="text-align:center">root</td>
<td style="text-align:left">1080Bytes</td>
<td style="text-align:center">May 11 21:05</td>
<td style="text-align:center">/etc/passwd</td>
</tr>
</tbody>
</table>
<h4 id="文件类型："><a href="#文件类型：" class="headerlink" title="文件类型："></a>文件类型：</h4><p>&ensp;&ensp;&ensp;&ensp;[ d ]：directory,表示目录</p>
<p>&ensp;&ensp;&ensp;&ensp;[ - ]：f,普通文件</p>
<p>&ensp;&ensp;&ensp;&ensp;[ l ]：symbolic link,链接文件</p>
<p>&ensp;&ensp;&ensp;&ensp;[ b ]：block device,块设备文件,支持以”block”为单位进行随机访问.(存储的接口设备,如：/dev/sda)</p>
<p>&ensp;&ensp;&ensp;&ensp;[ c ]：character device,字符设备文件,支持以”character”为单位进行线性访问(如：键盘、鼠标)</p>
<p>&ensp;&ensp;&ensp;&ensp;[ p ]：pipe,管道文件</p>
<p>&ensp;&ensp;&ensp;&ensp;[ s ]：scoket,套接字文件</p>
<h4 id="权限"><a href="#权限" class="headerlink" title="权限:"></a>权限:</h4><p>&ensp;&ensp;&ensp;&ensp;[ r ]：read,可读</p>
<p>&ensp;&ensp;&ensp;&ensp;[ w ]：write,可写</p>
<p>&ensp;&ensp;&ensp;&ensp;[ x ]：excute,可执行</p>
<p>&ensp;&ensp;权限———&gt;文件：</p>
<p>&ensp;&ensp;&ensp;&ensp;r：可读取文件的内容</p>
<p>&ensp;&ensp;&ensp;&ensp;w：可修改文件的内容，但不能删除该文件</p>
<p>&ensp;&ensp;&ensp;&ensp;x：可执行该文件，运行为进程</p>
<p>&ensp;&ensp;权限———&gt;目录：</p>
<p>&ensp;&ensp;&ensp;&ensp;r：可列出该目录下的所有文件列表</p>
<p>&ensp;&ensp;&ensp;&ensp;w：可修改该目录下文件(建立新文件、删除文件或目录而不管它们的权限、重命名)</p>
<p>&ensp;&ensp;&ensp;&ensp;x：可进入该目录,可复制该目录下内容到其它位置</p>
<h5 id="权限组合机制——数字表示（二进制——-gt-八进制）："><a href="#权限组合机制——数字表示（二进制——-gt-八进制）：" class="headerlink" title="权限组合机制——数字表示（二进制——&gt;八进制）："></a>权限组合机制——数字表示（二进制——&gt;八进制）：</h5><table>
<thead>
<tr>
<th style="text-align:center">权限位</th>
<th style="text-align:center">二进制</th>
<th style="text-align:center">八进制</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">—</td>
<td style="text-align:center">000</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">–x</td>
<td style="text-align:center">001</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">-w-</td>
<td style="text-align:center">010</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">-wx</td>
<td style="text-align:center">011</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">r–</td>
<td style="text-align:center">100</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">r-x</td>
<td style="text-align:center">101</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">rw-</td>
<td style="text-align:center">110</td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td style="text-align:center">rwx</td>
<td style="text-align:center">111</td>
<td style="text-align:center">7</td>
</tr>
</tbody>
</table>
<h4 id="特殊权限"><a href="#特殊权限" class="headerlink" title="特殊权限:"></a>特殊权限:</h4><p>&ensp;&ensp;特殊权限：SUID、SGID、STICKY</p>
<h5 id="ensp-ensp-ensp-ensp-SUID："><a href="#ensp-ensp-ensp-ensp-SUID：" class="headerlink" title="&ensp;&ensp;&ensp;&ensp;SUID："></a>&ensp;&ensp;&ensp;&ensp;SUID：</h5><p>&ensp;&ensp;&ensp;&ensp;默认情况下：用户发起的进程，进程的属主是其发起者，因此进程以发起者身份运行</p>
<p>&ensp;&ensp;&ensp;&ensp;SUID的功能：用户运行某程序时，如果此程序拥有SUID权限，那么程序运行为进程时，进程的属主不是发起者，而是程序文件自己的属主.</p>
<p>&ensp;&ensp;&ensp;&ensp;管理文件SUID权限：</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;chmod u(+|-)s file</p>
<p>&ensp;&ensp;&ensp;&ensp;展现位置：属主的执行权限位（如果属主原本有执行权限，显示为小写s，否则显示为大写S）</p>
<h5 id="ensp-ensp-ensp-ensp-SGID："><a href="#ensp-ensp-ensp-ensp-SGID：" class="headerlink" title="&ensp;&ensp;&ensp;&ensp;SGID："></a>&ensp;&ensp;&ensp;&ensp;SGID：</h5><p>&ensp;&ensp;&ensp;&ensp;SGID的功能：当目录有写权限且有SGID权限时，那么所有属于此目录属组的用户在此目录中新建文件或目录时，新文件或目录的属组不是用户的基本组，而是此目录的属组。</p>
<p>&ensp;&ensp;&ensp;&ensp;管理文件SUID权限：</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;chmod g(+|-)s file</p>
<p>&ensp;&ensp;&ensp;&ensp;展现位置：属组的权限位（如果属组原本有执行权限，显示为小写s,否则显示为大写S）</p>
<h5 id="ensp-ensp-ensp-ensp-STICKY"><a href="#ensp-ensp-ensp-ensp-STICKY" class="headerlink" title="&ensp;&ensp;&ensp;&ensp;STICKY:"></a>&ensp;&ensp;&ensp;&ensp;STICKY:</h5><p>&ensp;&ensp;&ensp;&ensp;STICKY的功能：对于属组或全局可写的目录，组内的所有用户或系统上的所有用户对此目录中都能创建新文件或删除所有的已有文件，如果为此目录设置sticky权限，则每个用户能够在此目录中创建新文件，但不能删除其它用户的文件或目录的权限.</p>
<p>&ensp;&ensp;&ensp;&ensp;管理文件sticky权限：</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;chmod o(+|-)t file</p>
<p>&ensp;&ensp;&ensp;&ensp;展现位置：其它用户的权限位（如果其它用户原本有执行权限，显示为小写t,否则显示为大写T）</p>
<h5 id="特殊权限机制——数字表示（二进制——-gt-八进制）："><a href="#特殊权限机制——数字表示（二进制——-gt-八进制）：" class="headerlink" title="特殊权限机制——数字表示（二进制——&gt;八进制）："></a>特殊权限机制——数字表示（二进制——&gt;八进制）：</h5><table>
<thead>
<tr>
<th style="text-align:center">suid</th>
<th style="text-align:center">sgid</th>
<th style="text-align:center">sticky</th>
<th style="text-align:center">八进制</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">6</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">7</td>
</tr>
</tbody>
</table>
<h3 id="权限管理命令："><a href="#权限管理命令：" class="headerlink" title="权限管理命令："></a>权限管理命令：</h3><p>&ensp;&ensp;&ensp;&ensp;三类用户表示方式：</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;u：属主</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;g：属组</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;o：其它</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;a：包括以上三类用户</p>
<h4 id="ensp-ensp-权限管理命令：chmod"><a href="#ensp-ensp-权限管理命令：chmod" class="headerlink" title="&ensp;&ensp;权限管理命令：chmod"></a>&ensp;&ensp;权限管理命令：chmod</h4><p>&ensp;&ensp;&ensp;&ensp;语法格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">chmod 用户类别=MODE file,...</div><div class="line"></div><div class="line">chmod 用户类别+|-MODE file,...</div><div class="line"></div><div class="line">Each MODE is of the form `[ugoa]*([-+=]([rwxXst]*|[ugo]))+<span class="string">'.</span></div></pre></td></tr></table></figure></p>
<p>&ensp;&ensp;&ensp;&ensp; 选项：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-R：(--recursive)递归修改（改变目录及所有子目录和包含文件的权限）</div><div class="line"></div><div class="line">--reference：（--reference=/path/file1 file2  参考file1的权限赋给file2）</div></pre></td></tr></table></figure></p>
<p>实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<h4 id="ensp-ensp-从属关系管理命令：chown"><a href="#ensp-ensp-从属关系管理命令：chown" class="headerlink" title="&ensp;&ensp;从属关系管理命令：chown"></a>&ensp;&ensp;从属关系管理命令：chown</h4><p>&ensp;&ensp;&ensp;&ensp;语法格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">chown [OPTION]... [OWNER][:[GROUP]] FILE...</div><div class="line"></div><div class="line">chown [OPTION]... [OWNER][.[GROUP]] FILE...</div></pre></td></tr></table></figure></p>
<p>&ensp;&ensp;&ensp;&ensp;选项：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-R：(--recursive)递归修改（修改目录及其内部文件的属主或属组）</div><div class="line"></div><div class="line">--reference：（--reference=/path/file1 file2  参考file1的权限赋给file2）</div></pre></td></tr></table></figure></p>
<p>&ensp;&ensp;&ensp;&ensp;实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">1.修改文件属主</div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -l file.txt</span></div><div class="line">-rw-r--r--. 1 root root 76 Dec  9 14:04 file.txt</div><div class="line">[root@CentOS6 ~]<span class="comment"># chown tom file.txt                   </span></div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -l file.txt    </span></div><div class="line">-rw-r--r--. 1 tom root 76 Dec  9 14:04 file.txt</div><div class="line"></div><div class="line">2.修改文件属组</div><div class="line">[root@CentOS6 ~]<span class="comment"># chown .tom file.txt                   </span></div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -l file.txt      </span></div><div class="line">-rw-r--r--. 1 tom tom 76 Dec  9 14:04 file.txt</div><div class="line"></div><div class="line">3.修改整个目录属主和属组</div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -ld jack</span></div><div class="line">drwxr-xr-x. 3 root root 4096 Dec 14 15:04 jack</div><div class="line">[root@CentOS6 ~]<span class="comment"># chown -R tom.tom jack        </span></div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -ld jack          </span></div><div class="line">drwxr-xr-x. 3 tom tom 4096 Dec 14 15:04 jack</div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -l jack</span></div><div class="line">drwxr-xr-x. 3 tom tom 4096 Nov 10 12:53 data</div><div class="line">-rw-r--r--. 1 tom tom   20 Dec 14 15:04 input.txt</div><div class="line">-rw-r--r--. 1 tom tom   20 Dec 14 15:04 <span class="built_in">log</span>1.txt</div><div class="line"></div><div class="line">4.参考一个文件修改另一个文件</div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -l test*       </span></div><div class="line">-rw-r--r--. 1 root root 101 Nov 11 15:27 test.bak</div><div class="line">-rw-r--r--. 1 tom  root  40 Nov 21 16:14 test.sh</div><div class="line">[root@CentOS6 ~]<span class="comment"># chown --reference test.sh test.bak         </span></div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -l test*</span></div><div class="line">-rw-r--r--. 1 tom root 101 Nov 11 15:27 test.bak</div><div class="line">-rw-r--r--. 1 tom root  40 Nov 21 16:14 test.sh</div><div class="line"></div><div class="line">5.参考一个目录修改另一个目录，不加-R不修改子目录和包含的文件</div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -ld jack aaa   </span></div><div class="line">dr--r--r--. 2 root root 4096 Nov 20 22:48 aaa</div><div class="line">drwxr-xr-x. 3 tom  tom  4096 Dec 14 15:04 jack</div><div class="line">[root@CentOS6 ~]<span class="comment"># chown --reference aaa jack           </span></div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -ld jack aaa           </span></div><div class="line">dr--r--r--. 2 root root 4096 Nov 20 22:48 aaa</div><div class="line">drwxr-xr-x. 3 root root 4096 Dec 14 15:04 jack</div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -l jack </span></div><div class="line">drwxr-xr-x. 3 tom tom 4096 Nov 10 12:53 data</div><div class="line">-rw-r--r--. 1 tom tom   20 Dec 14 15:04 input.txt</div><div class="line">-rw-r--r--. 1 tom tom   20 Dec 14 15:04 <span class="built_in">log</span>1.txt</div><div class="line"></div><div class="line"></div><div class="line">6.参考一个目录修改另一个目录</div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -ld jack aaa   </span></div><div class="line">dr--r--r--. 2 root root 4096 Nov 20 22:48 aaa</div><div class="line">drwxr-xr-x. 3 tom  tom  4096 Dec 14 15:04 jack</div><div class="line">[root@CentOS6 ~]<span class="comment"># chown -R --reference aaa jack         </span></div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -ld jack aaa              </span></div><div class="line">dr--r--r--. 2 root root 4096 Nov 20 22:48 aaa</div><div class="line">drwxr-xr-x. 3 root root 4096 Dec 14 15:04 jack</div><div class="line">[root@CentOS6 ~]<span class="comment"># ls -l jack                   </span></div><div class="line">drwxr-xr-x. 3 root root 4096 Nov 10 12:53 data</div><div class="line">-rw-r--r--. 1 root root   20 Dec 14 15:04 input.txt</div><div class="line">-rw-r--r--. 1 root root   20 Dec 14 15:04 <span class="built_in">log</span>1.txt</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">system系统管理</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/13/linux系统管理之文件权限/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-linux用户和组管理2" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/03/linux用户和组管理2/">用户和组管理</a>
    </h1>
  

        
        <a href="/2017/05/03/linux用户和组管理2/" class="archive-article-date">
  	<time datetime="2017-05-03T05:52:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-03</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="linux用户和组"><a href="#linux用户和组" class="headerlink" title="linux用户和组"></a>linux用户和组</h2><h4 id="组管理相关命令"><a href="#组管理相关命令" class="headerlink" title="组管理相关命令"></a>组管理相关命令</h4><h5 id="创建用户组：groupadd"><a href="#创建用户组：groupadd" class="headerlink" title="创建用户组：groupadd"></a>创建用户组：groupadd</h5><p>&ensp;&ensp;&ensp;&ensp;groupadd - create a new group</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">groupadd [options] group</div></pre></td></tr></table></figure></p>
<p>命令常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">长选项</th>
<th style="text-align:left">选项说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-g</td>
<td style="text-align:left">–gid</td>
<td style="text-align:left">指定一个组ID</td>
</tr>
<tr>
<td style="text-align:left">-r</td>
<td style="text-align:left">–system</td>
<td style="text-align:left">创建一个系统组</td>
</tr>
</tbody>
</table>
<p>实例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">创建一个组ID为2000的组mygroup</div><div class="line">[root@centos6-lab ~]<span class="comment"># groupadd -g 2000 mygroup</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/group</span></div><div class="line">slocate:x:21:</div><div class="line">mygroup:x:2000:</div><div class="line"></div><div class="line">创建一个系统组sysgroup</div><div class="line">[root@centos6-lab ~]<span class="comment"># groupadd -r sysgroup</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -1 /etc/group</span></div><div class="line">sysgroup:x:499:</div></pre></td></tr></table></figure>
<h5 id="修改用户组：groupmod"><a href="#修改用户组：groupmod" class="headerlink" title="修改用户组：groupmod"></a>修改用户组：groupmod</h5><p>&ensp;&ensp;&ensp;&ensp;groupmod - modify a group definition on the system</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">groupmod [options] GROUP</div></pre></td></tr></table></figure></p>
<p>命令常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">长选项</th>
<th style="text-align:left">选项说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-g</td>
<td style="text-align:left">–gid</td>
<td style="text-align:left">更改组ID</td>
</tr>
<tr>
<td style="text-align:left">-n</td>
<td style="text-align:left">–new-name</td>
<td style="text-align:left">更改组名</td>
</tr>
</tbody>
</table>
<p>实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">修改mygroup组组ID为2001</div><div class="line">[root@centos6-lab ~]<span class="comment"># groupmod -g 2001 mygroup</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/group</span></div><div class="line">mygroup:x:2001:</div><div class="line">sysgroup:x:499:</div><div class="line"></div><div class="line">修改mygroup组名为mygrg</div><div class="line">[root@centos6-lab ~]<span class="comment"># groupmod -n mygrg mygroup</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/group</span></div><div class="line">sysgroup:x:499:</div><div class="line">mygrg:x:2001:</div></pre></td></tr></table></figure></p>
<h5 id="删除用户组：groupdel"><a href="#删除用户组：groupdel" class="headerlink" title="删除用户组：groupdel"></a>删除用户组：groupdel</h5><p>&ensp;&ensp;&ensp;&ensp;groupdel - delete a group</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">groupdel [options] GROUP</div></pre></td></tr></table></figure></p>
<p>实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">删除系统组sysgroup</div><div class="line">[root@centos6-lab ~]<span class="comment"># groupdel sysgroup</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/group</span></div><div class="line">slocate:x:21:</div><div class="line">mygrg:x:2001:</div></pre></td></tr></table></figure></p>
<h4 id="用户管理相关命令"><a href="#用户管理相关命令" class="headerlink" title="用户管理相关命令"></a>用户管理相关命令</h4><h5 id="创建用户：useadd"><a href="#创建用户：useadd" class="headerlink" title="创建用户：useadd"></a>创建用户：useadd</h5><p>&ensp;&ensp;&ensp;&ensp;useradd - create a new user or update default new user information</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">useradd [options] LOGIN</div><div class="line">useradd -D</div><div class="line">useradd -D [options]</div></pre></td></tr></table></figure></p>
<p>命令常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">长选项</th>
<th style="text-align:left">选项说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-u</td>
<td style="text-align:left">–uid</td>
<td style="text-align:left">给用户指定一个UID</td>
</tr>
<tr>
<td style="text-align:left">-g</td>
<td style="text-align:left">–gid</td>
<td style="text-align:left">给用户指定一个基本组GID</td>
</tr>
<tr>
<td style="text-align:left">-G</td>
<td style="text-align:left">–groups</td>
<td style="text-align:left">给用户指定一个附加组</td>
</tr>
<tr>
<td style="text-align:left">-c</td>
<td style="text-align:left">–comment</td>
<td style="text-align:left">给用户添加注释信息</td>
</tr>
<tr>
<td style="text-align:left">-d</td>
<td style="text-align:left">–home-dir</td>
<td style="text-align:left">给用户指定家目录</td>
</tr>
<tr>
<td style="text-align:left">-s</td>
<td style="text-align:left">–shell</td>
<td style="text-align:left">给用户指定shell环境</td>
</tr>
<tr>
<td style="text-align:left">-M</td>
<td style="text-align:left">–no-create-home</td>
<td style="text-align:left">不创建家目录</td>
</tr>
<tr>
<td style="text-align:left">-r</td>
<td style="text-align:left">–system</td>
<td style="text-align:left">创建系统用户</td>
</tr>
<tr>
<td style="text-align:left">-e</td>
<td style="text-align:left">–expiredate</td>
<td style="text-align:left">指定用户帐号过期时间</td>
</tr>
<tr>
<td style="text-align:left">-D</td>
<td style="text-align:left">–defaults</td>
<td style="text-align:left">显示创建用户的默认配置，也可加选项更新默认的配置</td>
</tr>
</tbody>
</table>
<p>实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">创建一个用户jack指定UID为2001,组为GID为2001的组（此组必须提前已经存在）</div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/group</span></div><div class="line">slocate:x:21:</div><div class="line">mygrg:x:2001:</div><div class="line">[root@centos6-lab ~]<span class="comment"># useradd -u 2001 -g 2001 jack</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/group</span></div><div class="line">slocate:x:21:</div><div class="line">mygrg:x:2001:</div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/passwd</span></div><div class="line">tcpdump:x:72:72::/:/sbin/nologin</div><div class="line">jack:x:2001:2001::/home/jack:/bin/bash</div><div class="line"></div><div class="line">新建一个用户tom指定UID为2000，组为自己默认创建的私有组tom，并添加到其它附加组组ID为2002的testgroup组</div><div class="line">[root@centos6-lab ~]<span class="comment"># groupadd -g 2002 testgroup</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/group</span></div><div class="line">mygrg:x:2001:</div><div class="line">testgroup:x:2002:</div><div class="line">[root@centos6-lab ~]<span class="comment"># useradd -u 2000 -G testgroup tom</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -3 /etc/group</span></div><div class="line">mygrg:x:2001:</div><div class="line">testgroup:x:2002:tom</div><div class="line">tom:x:2000:</div><div class="line"></div><div class="line">新建一个用户gentoo,指定家目录为/tmp/gentoo,添加注释:<span class="string">"this is a linux system"</span>,指定shell为/sbin/nologin.</div><div class="line">[root@centos6-lab ~]<span class="comment"># useradd -d /tmp/gentoo -c "this is a linux system" -s /sbin/nologin gentoo</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/passwd</span></div><div class="line">tom:x:2000:2000::/home/tom:/bin/bash</div><div class="line">gentoo:x:2002:2003:this is a linux system:/tmp/gentoo:/sbin/nologin</div><div class="line">[root@centos6-lab ~]<span class="comment"># ls -ld /tmp/gentoo</span></div><div class="line">drwx------. 2 gentoo gentoo 4096 May  4 10:39 /tmp/gentoo</div><div class="line">[root@centos6-lab ~]<span class="comment"># ls -la /tmp/gentoo</span></div><div class="line">total 20</div><div class="line">drwx------. 2 gentoo gentoo 4096 May  4 10:39 .</div><div class="line">drwxrwxrwt. 4 root   root   4096 May  4 10:40 ..</div><div class="line">-rw-r--r--. 1 gentoo gentoo   18 Oct 16  2014 .bash_logout</div><div class="line">-rw-r--r--. 1 gentoo gentoo  176 Oct 16  2014 .bash_profile</div><div class="line">-rw-r--r--. 1 gentoo gentoo  124 Oct 16  2014 .bashrc</div><div class="line"></div><div class="line">新建一个用户archlinux,不指定家目录</div><div class="line">[root@centos6-lab ~]<span class="comment"># useradd -M archlinux</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># tail -2 /etc/passwd</span></div><div class="line">gentoo:x:2002:2003:this is a linux system:/tmp/gentoo:/sbin/nologin</div><div class="line">archlinux:x:2003:2004::/home/archlinux:/bin/bash</div><div class="line">[root@centos6-lab ~]<span class="comment"># ls -l /home</span></div><div class="line">total 8</div><div class="line">drwx------. 2 jack mygrg 4096 May  4 10:12 jack</div><div class="line">drwx------. 2 tom  tom   4096 May  4 10:30 tom</div><div class="line"></div><div class="line">显示创建一个用户默认配置</div><div class="line">[root@centos6-lab ~]<span class="comment"># useradd -D</span></div><div class="line">GROUP=100</div><div class="line">HOME=/home</div><div class="line">INACTIVE=-1</div><div class="line">EXPIRE=</div><div class="line">SHELL=/bin/bash</div><div class="line">SKEL=/etc/skel</div><div class="line">CREATE_MAIL_SPOOL=yes</div></pre></td></tr></table></figure></p>
<h5 id="修改用户属性：usermod"><a href="#修改用户属性：usermod" class="headerlink" title="修改用户属性：usermod"></a>修改用户属性：usermod</h5><p>&ensp;&ensp;&ensp;&ensp;usermod - modify a user account</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">usermod [options] LOGIN</div></pre></td></tr></table></figure></p>
<p>命令常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">长选项</th>
<th style="text-align:left">选项说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-u</td>
<td style="text-align:left">–uid</td>
<td style="text-align:left">修改用户UID</td>
</tr>
<tr>
<td style="text-align:left">-g</td>
<td style="text-align:left">–gid</td>
<td style="text-align:left">更改用户所属的组</td>
</tr>
<tr>
<td style="text-align:left">-G</td>
<td style="text-align:left">–groups</td>
<td style="text-align:left">修改用户附加组,如果有原来的附加组,原来附加组会被覆盖</td>
</tr>
<tr>
<td style="text-align:left">-a</td>
<td style="text-align:left">–append</td>
<td style="text-align:left">和-G一起使用表示给用户追加一个附加组</td>
</tr>
<tr>
<td style="text-align:left">-c</td>
<td style="text-align:left">–comment</td>
<td style="text-align:left">修改用户注释信息</td>
</tr>
<tr>
<td style="text-align:left">-d</td>
<td style="text-align:left">–home-dir</td>
<td style="text-align:left">修改用户指定家目录,用户原来家目录的不会被移到新的家目录位置</td>
</tr>
<tr>
<td style="text-align:left">-m</td>
<td style="text-align:left">–move-home</td>
<td style="text-align:left">和-d一起使用，则用用户的家目录会被移动到新的位置</td>
</tr>
<tr>
<td style="text-align:left">-s</td>
<td style="text-align:left">–shell</td>
<td style="text-align:left">修改用户指定shell环境</td>
</tr>
<tr>
<td style="text-align:left">-l</td>
<td style="text-align:left">–login</td>
<td style="text-align:left">修改用户名</td>
</tr>
<tr>
<td style="text-align:left">-L</td>
<td style="text-align:left">–lock</td>
<td style="text-align:left">锁定用户密码,会在原加密密码前面加一个”!”</td>
</tr>
<tr>
<td style="text-align:left">-U</td>
<td style="text-align:left">–unlock</td>
<td style="text-align:left">解锁用户密码,把加在加密密码前面的”!”去掉</td>
</tr>
</tbody>
</table>
<p>实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">修改用户gentoo的UID为2003</div><div class="line">[root@centos6-lab ~]<span class="comment"># cat /etc/passwd|grep gentoo</span></div><div class="line">gentoo:x:2002:2003:this is a linux system:/tmp/gentoo:/sbin/nologin</div><div class="line">[root@centos6-lab ~]<span class="comment"># usermod -u 2004 gentoo</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># cat /etc/passwd|grep gentoo</span></div><div class="line">gentoo:x:2004:2003:this is a linux system:/tmp/gentoo:/sbin/nologin</div><div class="line"></div><div class="line">更改gentoo用户所属的组</div><div class="line">[root@centos6-lab ~]<span class="comment"># usermod -g 2004 gentoo</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># id gentoo</span></div><div class="line">uid=2004(gentoo) gid=2004(archlinux) groups=2004(archlinux)</div><div class="line"></div><div class="line">给用户gentoo添加一个附加组mygrg</div><div class="line">[root@centos6-lab ~]<span class="comment"># usermod -aG mygrg gentoo</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># id gentoo</span></div><div class="line">uid=2004(gentoo) gid=2004(archlinux) groups=2004(archlinux),2001(mygrg)</div><div class="line"></div><div class="line">修改用户tom的家目录为/tmp/tom</div><div class="line">[root@centos6-lab tom]<span class="comment"># ls -l /home/tom</span></div><div class="line">total 0</div><div class="line">-rw-r--r--. 1 root root 0 May  4 14:37 a</div><div class="line">-rw-r--r--. 1 root root 0 May  4 14:37 b</div><div class="line">-rw-r--r--. 1 root root 0 May  4 14:37 c</div><div class="line">[root@centos6-lab ~]<span class="comment"># usermod -md /tmp/tom tom</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># ls -l /home</span></div><div class="line">total 4</div><div class="line">drwx------. 2 jack mygrg 4096 May  4 10:12 jack</div><div class="line">[root@centos6-lab ~]<span class="comment"># ls -l /tmp/tom</span></div><div class="line">total 0</div><div class="line">-rw-r--r--. 1 root root 0 May  4 14:37 a</div><div class="line">-rw-r--r--. 1 root root 0 May  4 14:37 b</div><div class="line">-rw-r--r--. 1 root root 0 May  4 14:37 c</div><div class="line"></div><div class="line">修改用户gentoo用户的shell</div><div class="line">[root@centos6-lab ~]<span class="comment"># cat /etc/passwd |grep archlinux</span></div><div class="line">archlinux:x:2003:2004::/home/archlinux:/bin/bash</div><div class="line">[root@centos6-lab ~]<span class="comment"># usermod -s /sbin/nologin archlinux</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># cat /etc/passwd |grep archlinux</span></div><div class="line">archlinux:x:2003:2004::/home/archlinux:/sbin/nologin</div></pre></td></tr></table></figure></p>
<h5 id="删除用户：userdel"><a href="#删除用户：userdel" class="headerlink" title="删除用户：userdel"></a>删除用户：userdel</h5><p>&ensp;&ensp;&ensp;&ensp;userdel - delete a user account and related files</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">userdel [options] LOGIN</div></pre></td></tr></table></figure></p>
<p>命令常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">长选项</th>
<th style="text-align:left">选项说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-r</td>
<td style="text-align:left">–remove</td>
<td style="text-align:left">删除用户时一并删除用户的家目录</td>
</tr>
</tbody>
</table>
<p>实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">删除用户gentoo连同家目录一起删除</div><div class="line">[root@centos6-lab ~]<span class="comment"># userdel -r gentoo</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># id gentoo</span></div><div class="line">id: gentoo: No such user</div><div class="line">[root@centos6-lab ~]<span class="comment"># ls -l /tmp</span></div><div class="line">total 4</div><div class="line">drwx------. 2 tom tom 4096 May  4 14:37 tom</div></pre></td></tr></table></figure></p>
<h4 id="密码管理相关命令"><a href="#密码管理相关命令" class="headerlink" title="密码管理相关命令"></a>密码管理相关命令</h4><h5 id="修改用户密码属性：passwd"><a href="#修改用户密码属性：passwd" class="headerlink" title="修改用户密码属性：passwd"></a>修改用户密码属性：passwd</h5><p>&ensp;&ensp;&ensp;&ensp;passwd - update user’s authentication tokens</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">passwd [-k] [<span class="_">-l</span>] [-u [<span class="_">-f</span>]] [<span class="_">-d</span>] [<span class="_">-e</span>] [-n mindays] [-x maxdays] [-w warndays] [-i inactivedays] [-S] [--stdin] [username]</div></pre></td></tr></table></figure></p>
<p>命令常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">长选项</th>
<th style="text-align:left">选项说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-l</td>
<td style="text-align:left">–lock</td>
<td style="text-align:left">锁定用户密码</td>
</tr>
<tr>
<td style="text-align:left">-u</td>
<td style="text-align:left">–unlock</td>
<td style="text-align:left">解锁用户密码</td>
</tr>
<tr>
<td style="text-align:left">-d</td>
<td style="text-align:left">–delete</td>
<td style="text-align:left">删除用户密码</td>
</tr>
<tr>
<td style="text-align:left">-e</td>
<td style="text-align:left">–expire</td>
<td style="text-align:left">指定用户密码过期时间（date）</td>
</tr>
<tr>
<td style="text-align:left">-n</td>
<td style="text-align:left">–minimum</td>
<td style="text-align:left">指定用户密码最短使用期限（days）</td>
</tr>
<tr>
<td style="text-align:left">-x</td>
<td style="text-align:left">–maximum</td>
<td style="text-align:left">指定用户密码最长使用期限（days）</td>
</tr>
<tr>
<td style="text-align:left">-w</td>
<td style="text-align:left">–warning</td>
<td style="text-align:left">指定用户密码提前警告时间（days）</td>
</tr>
<tr>
<td style="text-align:left">–stdin</td>
<td style="text-align:left"></td>
<td style="text-align:left">非交互式给用户设置和修改密码</td>
</tr>
</tbody>
</table>
<p>实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">给tom用户设备密码</div><div class="line">[root@centos6-lab ~]<span class="comment"># id tom</span></div><div class="line">uid=2000(tom) gid=2000(tom) groups=2000(tom),2002(testgroup)</div><div class="line">[root@centos6-lab ~]<span class="comment"># passwd tom</span></div><div class="line">Changing password <span class="keyword">for</span> user tom.</div><div class="line">New password: </div><div class="line">BAD PASSWORD: it is too simplistic/systematic</div><div class="line">BAD PASSWORD: is too simple</div><div class="line">Retype new password: </div><div class="line">passwd: all authentication tokens updated successfully.</div><div class="line"></div><div class="line">重置tom用户密码也可用于设置密码</div><div class="line">[root@centos6-lab ~]<span class="comment"># echo "tom123"|passwd --stdin tom</span></div><div class="line">Changing password <span class="keyword">for</span> user tom.</div><div class="line">passwd: all authentication tokens updated successfully.</div></pre></td></tr></table></figure></p>
<h5 id="修改用户密码属性：gpasswd"><a href="#修改用户密码属性：gpasswd" class="headerlink" title="修改用户密码属性：gpasswd"></a>修改用户密码属性：gpasswd</h5><p>&ensp;&ensp;&ensp;&ensp;gpasswd - administer /etc/group and /etc/gshadow</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpasswd [option] group</div></pre></td></tr></table></figure></p>
<p>命令常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">长选项</th>
<th style="text-align:left">选项说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-a</td>
<td style="text-align:left">–add</td>
<td style="text-align:left">向组中添加用户</td>
</tr>
<tr>
<td style="text-align:left">-d</td>
<td style="text-align:left">–delete</td>
<td style="text-align:left">从组中删除用户</td>
</tr>
</tbody>
</table>
<p>实例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">给tom用户添加一个附加组</div><div class="line">[root@centos6-lab ~]<span class="comment"># id tom</span></div><div class="line">uid=2000(tom) gid=2000(tom) groups=2000(tom),2002(testgroup)</div><div class="line">[root@centos6-lab ~]<span class="comment"># gpasswd -a tom archlinux</span></div><div class="line">Adding user tom to group archlinux</div><div class="line">[root@centos6-lab ~]<span class="comment"># id tom</span></div><div class="line">uid=2000(tom) gid=2000(tom) groups=2000(tom),2002(testgroup),2004(archlinux)</div><div class="line"></div><div class="line">添加tom用户的一个附加组</div><div class="line">[root@centos6-lab ~]<span class="comment"># id tom</span></div><div class="line">uid=2000(tom) gid=2000(tom) groups=2000(tom),2002(testgroup),2004(archlinux)</div><div class="line">[root@centos6-lab ~]<span class="comment"># </span></div><div class="line">[root@centos6-lab ~]<span class="comment"># </span></div><div class="line">[root@centos6-lab ~]<span class="comment"># gpasswd -d tom testgroup</span></div><div class="line">Removing user tom from group testgroup</div><div class="line">[root@centos6-lab ~]<span class="comment"># id tom</span></div><div class="line">uid=2000(tom) gid=2000(tom) groups=2000(tom),2004(archlinux)</div></pre></td></tr></table></figure>
<h5 id="newgrp-登录到一个新的group"><a href="#newgrp-登录到一个新的group" class="headerlink" title="newgrp 登录到一个新的group"></a>newgrp 登录到一个新的group</h5><p>&ensp;&ensp;&ensp;&ensp;newgrp - log in to a new group</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">newgrp [-] [group]</div></pre></td></tr></table></figure></p>
<p>实例:</p>
<h5 id="chage修改用户密码过期信息"><a href="#chage修改用户密码过期信息" class="headerlink" title="chage修改用户密码过期信息"></a>chage修改用户密码过期信息</h5><p>&ensp;&ensp;&ensp;&ensp;chage - change user password expiry information</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Usage: chage [options] [LOGIN]</div></pre></td></tr></table></figure></p>
<p>命令常用选项：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@centos6-lab ~]<span class="comment"># chage --help</span></div><div class="line">Options:</div><div class="line">  <span class="_">-d</span>, --lastday LAST_DAY        <span class="built_in">set</span> date of last password change to LAST_DAY</div><div class="line">  -E, --expiredate EXPIRE_DATE  <span class="built_in">set</span> account expiration date to EXPIRE_DATE</div><div class="line">  -h, --help                    display this <span class="built_in">help</span> message and <span class="built_in">exit</span></div><div class="line">  -I, --inactive INACTIVE       <span class="built_in">set</span> password inactive after expiration</div><div class="line">                                to INACTIVE</div><div class="line">  <span class="_">-l</span>, --list                    show account aging information</div><div class="line">  -m, --mindays MIN_DAYS        <span class="built_in">set</span> minimum number of days before password</div><div class="line">                                change to MIN_DAYS</div><div class="line">  -M, --maxdays MAX_DAYS        <span class="built_in">set</span> maximim number of days before password</div><div class="line">                                change to MAX_DAYS</div><div class="line">  -W, --warndays WARN_DAYS      <span class="built_in">set</span> expiration warning days to WARN_DAYS</div></pre></td></tr></table></figure></p>
<h5 id="显示用户真实有效的信息：id"><a href="#显示用户真实有效的信息：id" class="headerlink" title="显示用户真实有效的信息：id"></a>显示用户真实有效的信息：id</h5><p>&ensp;&ensp;&ensp;&ensp;id - print real and effective user and group IDs</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id [OPTION]... [USER]</div></pre></td></tr></table></figure></p>
<p>命令常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">长选项</th>
<th style="text-align:left">选项说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-u</td>
<td style="text-align:left">–user</td>
<td style="text-align:left">只显示用户ID</td>
</tr>
<tr>
<td style="text-align:left">-g</td>
<td style="text-align:left">–group</td>
<td style="text-align:left">只显示用户基本组ID</td>
</tr>
<tr>
<td style="text-align:left">-G</td>
<td style="text-align:left">–groups</td>
<td style="text-align:left">显示用户的有组ID</td>
</tr>
<tr>
<td style="text-align:left">-n</td>
<td style="text-align:left">–name</td>
<td style="text-align:left">显示用户名和组名，一般和-ugG搭配使用</td>
</tr>
</tbody>
</table>
<p>实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[root@centos6-lab ~]<span class="comment"># id tom</span></div><div class="line">uid=2000(tom) gid=2000(tom) groups=2000(tom),2002(testgroup)</div><div class="line">[root@centos6-lab ~]<span class="comment"># id -u tom</span></div><div class="line">2000</div><div class="line">[root@centos6-lab ~]<span class="comment"># id -g tom</span></div><div class="line">2000</div><div class="line">[root@centos6-lab ~]<span class="comment"># id -G tom</span></div><div class="line">2000 2002</div><div class="line">[root@centos6-lab ~]<span class="comment"># id -nu tom</span></div><div class="line">tom</div><div class="line">[root@centos6-lab ~]<span class="comment"># id -ng tom</span></div><div class="line">tom</div><div class="line">[root@centos6-lab ~]<span class="comment"># id -nG tom</span></div><div class="line">tom testgroup</div></pre></td></tr></table></figure></p>
<h5 id="切换用户：su"><a href="#切换用户：su" class="headerlink" title="切换用户：su"></a>切换用户：su</h5><p>&ensp;&ensp;&ensp;&ensp;su - run a command with substitute user and group ID</p>
<p>命令格式：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su [options...] [-] [user [args...]]</div></pre></td></tr></table></figure></p>
<p>命令常用选项：</p>
<table>
<thead>
<tr>
<th style="text-align:left">选项</th>
<th style="text-align:left">长选项</th>
<th style="text-align:left">选项说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-c</td>
<td style="text-align:left">–command</td>
<td style="text-align:left">以指定用户的身份运行相关shell命令</td>
</tr>
</tbody>
</table>
<p>登录式切换：读取用户配置文件，连同用户环境变量一起切换</p>
<p>su - username</p>
<p>非登录式切换：不读取用户配置文件，不切换用户环境变量</p>
<p>su username</p>
<p>实例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[root@centos6-lab ~]<span class="comment"># su tom</span></div><div class="line">[tom@centos6-lab root]$ <span class="built_in">pwd</span></div><div class="line">/root</div><div class="line">[tom@centos6-lab root]$ <span class="built_in">exit</span></div><div class="line"><span class="built_in">exit</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># su - tom</span></div><div class="line">[tom@centos6-lab ~]$ <span class="built_in">pwd</span></div><div class="line">/tmp/tom</div><div class="line">[tom@centos6-lab ~]$ <span class="built_in">exit</span></div><div class="line"><span class="built_in">logout</span></div><div class="line">[root@centos6-lab ~]<span class="comment"># su - tom -c 'ls -l'</span></div><div class="line">total 0</div><div class="line">-rw-r--r--. 1 root root 0 May  4 14:37 a</div><div class="line">-rw-r--r--. 1 root root 0 May  4 14:37 b</div><div class="line">-rw-r--r--. 1 root root 0 May  4 14:37 c</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">system用户管理</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/03/linux用户和组管理2/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-linux用户和组管理1" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/03/linux用户和组管理1/">用户和组管理相关说明</a>
    </h1>
  

        
        <a href="/2017/05/03/linux用户和组管理1/" class="archive-article-date">
  	<time datetime="2017-05-03T01:52:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-05-03</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="linux用户和组"><a href="#linux用户和组" class="headerlink" title="linux用户和组"></a>linux用户和组</h2><h4 id="用户类别："><a href="#用户类别：" class="headerlink" title="用户类别："></a>用户类别：</h4><table>
<thead>
<tr>
<th style="text-align:left">用户类别</th>
<th style="text-align:left">UID范围</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">系统管理员</td>
<td style="text-align:left">0</td>
<td style="text-align:left">root</td>
</tr>
<tr>
<td style="text-align:left">系统用户</td>
<td style="text-align:left">1-499，1-999</td>
<td style="text-align:left">对守护进程、程序、服务获取资源进行权限分配一般不与登录</td>
</tr>
<tr>
<td style="text-align:left">普通用户</td>
<td style="text-align:left">500+，1000+</td>
<td style="text-align:left">交互式登录用户</td>
</tr>
</tbody>
</table>
<h4 id="用户组类别："><a href="#用户组类别：" class="headerlink" title="用户组类别："></a>用户组类别：</h4><table>
<thead>
<tr>
<th style="text-align:left">组类别</th>
<th style="text-align:left">GID范围</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">管理员组</td>
<td style="text-align:left">0</td>
<td style="text-align:left">root组</td>
</tr>
<tr>
<td style="text-align:left">系统用户组</td>
<td style="text-align:left">1-499，1-999</td>
<td style="text-align:left">对守护进程、程序、服务获取资源进行权限分配一般不与登录的组</td>
</tr>
<tr>
<td style="text-align:left">普通用户组</td>
<td style="text-align:left">500+，1000+</td>
<td style="text-align:left">交互式登录用户组</td>
</tr>
</tbody>
</table>
<h4 id="普通用户组："><a href="#普通用户组：" class="headerlink" title="普通用户组："></a>普通用户组：</h4><table>
<thead>
<tr>
<th style="text-align:left">组类别</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">私有组</td>
<td style="text-align:left">创建用户时，如果没为其指定所属组，系统会自动为其创建一个与用户名同名的组</td>
</tr>
<tr>
<td style="text-align:left">基本组</td>
<td style="text-align:left">用户的默认组</td>
</tr>
<tr>
<td style="text-align:left">附加组</td>
<td style="text-align:left">默认组以外的的其它组</td>
</tr>
</tbody>
</table>
<h4 id="用户和组相关的配置文件："><a href="#用户和组相关的配置文件：" class="headerlink" title="用户和组相关的配置文件："></a>用户和组相关的配置文件：</h4><table>
<thead>
<tr>
<th style="text-align:left">文件</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">/etc/passwd</td>
<td style="text-align:left">用户及其属性信息</td>
</tr>
<tr>
<td style="text-align:left">/etc/group</td>
<td style="text-align:left">组及属性信息</td>
</tr>
<tr>
<td style="text-align:left">/etc/shadow</td>
<td style="text-align:left">用户密码及其相关属性</td>
</tr>
<tr>
<td style="text-align:left">/etc/gshadow</td>
<td style="text-align:left">组密码及其相关属性</td>
</tr>
</tbody>
</table>
<h5 id="用户帐号信息：-etc-passwd"><a href="#用户帐号信息：-etc-passwd" class="headerlink" title="用户帐号信息：/etc/passwd"></a>用户帐号信息：/etc/passwd</h5><table>
<thead>
<tr>
<th style="text-align:left">account:</th>
<th style="text-align:left">passwd:</th>
<th style="text-align:left">UID:</th>
<th style="text-align:left">GID:</th>
<th style="text-align:left">GECOS:</th>
<th style="text-align:left">directory:</th>
<th style="text-align:left">shell</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">用户名</td>
<td style="text-align:left">加密密码</td>
<td style="text-align:left">用户ID</td>
<td style="text-align:left">基本组ID</td>
<td style="text-align:left">注释信息</td>
<td style="text-align:left">用户家目录</td>
<td style="text-align:left">用户默认shell</td>
</tr>
</tbody>
</table>
<h5 id="用户组信息：-etc-group"><a href="#用户组信息：-etc-group" class="headerlink" title="用户组信息：/etc/group"></a>用户组信息：/etc/group</h5><table>
<thead>
<tr>
<th style="text-align:left">group_name:</th>
<th style="text-align:left">passwd:</th>
<th style="text-align:left">GID:</th>
<th style="text-align:left">user_list</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">基本组名</td>
<td style="text-align:left">组加密密码</td>
<td style="text-align:left">基本组ID</td>
<td style="text-align:left">以此组为附加组的用户列表</td>
</tr>
</tbody>
</table>
<h5 id="用户影子密码信息：-etc-shadow"><a href="#用户影子密码信息：-etc-shadow" class="headerlink" title="用户影子密码信息：/etc/shadow"></a>用户影子密码信息：/etc/shadow</h5><table>
<thead>
<tr>
<th style="text-align:left">login name:</th>
<th style="text-align:left">encrypted password:</th>
<th style="text-align:left">date of last password change:</th>
<th style="text-align:left">minimum password age:</th>
<th style="text-align:left">maximum password age:</th>
<th style="text-align:left">password warning period:</th>
<th style="text-align:left">password inactivity period:</th>
<th style="text-align:left">account expiration date:</th>
<th style="text-align:left">reserved field</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">用户名</td>
<td style="text-align:left">加密密码</td>
<td style="text-align:left">最近一次密码修改时间</td>
<td style="text-align:left">密码最小使用期限</td>
<td style="text-align:left">密码最长使用期限</td>
<td style="text-align:left">密码告警期限</td>
<td style="text-align:left">密码非活动期限</td>
<td style="text-align:left">帐号过期时间</td>
<td style="text-align:left">保留区</td>
</tr>
</tbody>
</table>
<h4 id="用户和组相关的系统默认配置文件"><a href="#用户和组相关的系统默认配置文件" class="headerlink" title="用户和组相关的系统默认配置文件"></a>用户和组相关的系统默认配置文件</h4><h5 id="1-etc-skel目录"><a href="#1-etc-skel目录" class="headerlink" title="1. /etc/skel目录"></a>1. /etc/skel目录</h5><p>作用：用来存放新用户配置文件的目录，当我们添加新用户时，这个目录下的所有文件<br>会自动被复制到新添加的用户的家目录下；默认情况下，/etc/skel目录下的所有文件都<br>是隐藏文件（以.点开头的文件）；通过修改、添加、删除/etc/skel目录下的文件，我们可<br>为新创建的用户提供统一的、标准的、初始化用户环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># ls -al /etc/skel</span></div><div class="line">total 24</div><div class="line">drwxr-xr-x.  2 root root   59 Apr 26 10:32 .</div><div class="line">drwxr-xr-x. 81 root root 8192 May  3 09:33 ..</div><div class="line">-rw-r--r--.  1 root root   18 Nov 20  2015 .bash_logout</div><div class="line">-rw-r--r--.  1 root root  193 Nov 20  2015 .bash_profile</div><div class="line">-rw-r--r--.  1 root root  231 Nov 20  2015 .bashrc</div></pre></td></tr></table></figure>
<h5 id="2-etc-login-defs配置文件"><a href="#2-etc-login-defs配置文件" class="headerlink" title="2. /etc/login.defs配置文件"></a>2. /etc/login.defs配置文件</h5><p>作用：用来定义创建用户时需要的些用户的配置信息，如创建用户是否需要家目录，<br>UID和GID的范围，用户及密码的有效期限等等</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># ls -l /etc/login.defs </span></div><div class="line">-rw-r--r--. 1 root root 2028 Mar  6  2015 /etc/login.defs</div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/login.defs </span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Please note that the parameters in this configuration file control the</span></div><div class="line"><span class="comment"># behavior of the tools from the shadow-utils component. None of these</span></div><div class="line"><span class="comment"># tools uses the PAM mechanism, and the utilities that use PAM (such as the</span></div><div class="line"><span class="comment"># passwd command) should therefore be configured elsewhere. Refer to</span></div><div class="line"><span class="comment"># /etc/pam.d/system-auth for more information.</span></div><div class="line"><span class="comment">#</span></div><div class="line"></div><div class="line"><span class="comment"># *REQUIRED*</span></div><div class="line"><span class="comment">#   Directory where mailboxes reside, _or_ name of file, relative to the</span></div><div class="line"><span class="comment">#   home directory.  If you _do_ define both, MAIL_DIR takes precedence.</span></div><div class="line"><span class="comment">#   QMAIL_DIR is for Qmail</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#QMAIL_DIR	Maildir</span></div><div class="line">MAIL_DIR	/var/spool/mail</div><div class="line"><span class="comment">#MAIL_FILE	.mail</span></div><div class="line"></div><div class="line"><span class="comment"># Password aging controls:</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#	PASS_MAX_DAYS	Maximum number of days a password may be used.</span></div><div class="line"><span class="comment">#	PASS_MIN_DAYS	Minimum number of days allowed between password changes.</span></div><div class="line"><span class="comment">#	PASS_MIN_LEN	Minimum acceptable password length.</span></div><div class="line"><span class="comment">#	PASS_WARN_AGE	Number of days warning given before a password expires.</span></div><div class="line"><span class="comment">#</span></div><div class="line">PASS_MAX_DAYS	99999</div><div class="line">PASS_MIN_DAYS	0</div><div class="line">PASS_MIN_LEN	5</div><div class="line">PASS_WARN_AGE	7</div><div class="line"></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Min/max values for automatic uid selection in useradd</span></div><div class="line"><span class="comment">#</span></div><div class="line">UID_MIN                  1000</div><div class="line">UID_MAX                 60000</div><div class="line"><span class="comment"># System accounts</span></div><div class="line">SYS_UID_MIN               201</div><div class="line">SYS_UID_MAX               999</div><div class="line"></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Min/max values for automatic gid selection in groupadd</span></div><div class="line"><span class="comment">#</span></div><div class="line">GID_MIN                  1000</div><div class="line">GID_MAX                 60000</div><div class="line"><span class="comment"># System accounts</span></div><div class="line">SYS_GID_MIN               201</div><div class="line">SYS_GID_MAX               999</div><div class="line"></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># If defined, this command is run when removing a user.</span></div><div class="line"><span class="comment"># It should remove any at/cron/print jobs etc. owned by</span></div><div class="line"><span class="comment"># the user to be removed (passed as the first argument).</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment">#USERDEL_CMD	/usr/sbin/userdel_local</span></div><div class="line"></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># If useradd should create home directories for users by default</span></div><div class="line"><span class="comment"># On RH systems, we do. This option is overridden with the -m flag on</span></div><div class="line"><span class="comment"># useradd command line.</span></div><div class="line"><span class="comment">#</span></div><div class="line">CREATE_HOME	yes</div><div class="line"></div><div class="line"><span class="comment"># The permission mask is initialized to this value. If not specified, </span></div><div class="line"><span class="comment"># the permission mask will be initialized to 022.</span></div><div class="line">UMASK           077</div><div class="line"></div><div class="line"><span class="comment"># This enables userdel to remove user groups if no members exist.</span></div><div class="line"><span class="comment">#</span></div><div class="line">USERGROUPS_ENAB yes</div><div class="line"></div><div class="line"><span class="comment"># Use SHA512 to encrypt password.</span></div><div class="line">ENCRYPT_METHOD SHA512</div></pre></td></tr></table></figure>
<h5 id="3-etc-default-useradd文件："><a href="#3-etc-default-useradd文件：" class="headerlink" title="3. /etc/default/useradd文件："></a>3. /etc/default/useradd文件：</h5><p>添加用户时使用的配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># ls -l /etc/default/useradd </span></div><div class="line">-rw-r--r--. 1 root root 119 Mar  6  2015 /etc/default/useradd</div><div class="line">[root@centos7 ~]<span class="comment"># file /etc/default/useradd</span></div><div class="line">/etc/default/useradd: ASCII text</div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/default/useradd</span></div><div class="line"><span class="comment"># useradd defaults file</span></div><div class="line">GROUP=100</div><div class="line">HOME=/home</div><div class="line">INACTIVE=-1</div><div class="line">EXPIRE=</div><div class="line">SHELL=/bin/bash</div><div class="line">SKEL=/etc/skel</div><div class="line">CREATE_MAIL_SPOOL=yes</div></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color1">system用户管理</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/05/03/linux用户和组管理1/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-linux shell特性之IO重写向和管道" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/30/linux shell特性之IO重写向和管道/">shell重定向和管理</a>
    </h1>
  

        
        <a href="/2017/04/30/linux shell特性之IO重写向和管道/" class="archive-article-date">
  	<time datetime="2017-04-30T14:54:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-30</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="IO重定向及管道"><a href="#IO重定向及管道" class="headerlink" title="IO重定向及管道"></a>IO重定向及管道</h2><p>程序IO数据流有三种：</p>
<p>&ensp;&ensp;&ensp;&ensp;输入数据流：&lt;–标准输入（stdin），默认键盘</p>
<p>&ensp;&ensp;&ensp;&ensp;输出数据流：–&gt;标准输出（stdout），默认显示器</p>
<p>&ensp;&ensp;&ensp;&ensp;错误输出流：–&gt;错误输出（stderr），默认显示器</p>
<p>fd: file descriptor (文件描述符)：打开的文件都有一个文件描述符</p>
<p>&ensp;&ensp;&ensp;&ensp;标准输入：0</p>
<p>&ensp;&ensp;&ensp;&ensp;标准输出：1</p>
<p>&ensp;&ensp;&ensp;&ensp;错误输出：2</p>
<h3 id="IO重定向"><a href="#IO重定向" class="headerlink" title="IO重定向"></a>IO重定向</h3><h5 id="ensp-ensp-输出重定向："><a href="#ensp-ensp-输出重定向：" class="headerlink" title="&ensp;&ensp;输出重定向："></a>&ensp;&ensp;输出重定向：</h5><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&gt; （覆盖输出）</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&gt;&gt; （追加输出）</p>
<p>为了防止覆盖输出，shell提供了set命令用来限制</p>
<p>禁止覆盖输出重定向到已存在的文件：set -C<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/passwd &gt;/tmp/passwd1</span></div><div class="line">[root@centos7 ~]<span class="comment"># set -C</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/passwd &gt;/tmp/passwd1</span></div><div class="line">-bash: /tmp/passwd1: cannot overwrite existing file</div></pre></td></tr></table></figure></p>
<p>但此时也可使用强制覆盖输出：&gt;|<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/passwd &gt;|/tmp/passwd1</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/passwd &gt;/tmp/passwd1</span></div><div class="line">-bash: /tmp/passwd1: cannot overwrite existing file</div></pre></td></tr></table></figure></p>
<p>关闭禁止覆盖输出：set +C</p>
<h5 id="ensp-ensp-错误输出重定向："><a href="#ensp-ensp-错误输出重定向：" class="headerlink" title="&ensp;&ensp;错误输出重定向："></a>&ensp;&ensp;错误输出重定向：</h5><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;2&gt; （覆盖错误输出）</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;2&gt;&gt; （追加错误输出）</p>
<p>&ensp;&ensp;&ensp;&ensp;合并正常输出和错误输出的二种方式：</p>
<p>&ensp;&ensp;&ensp;&ensp;方式一：</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&amp;&gt;：</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&amp;&gt;&gt;：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># ls -l /varr</span></div><div class="line">ls: cannot access /varr: No such file or directory</div><div class="line">[root@centos7 ~]<span class="comment"># ls -l /varr &amp;&gt;/tmp/var.out</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /tmp/var.out </span></div><div class="line">ls: cannot access /varr: No such file or directory</div><div class="line">[root@centos7 ~]<span class="comment"># ls -l /var &amp;&gt;&gt;/tmp/var.out</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /tmp/var.out </span></div><div class="line">ls: cannot access /varr: No such file or directory</div><div class="line">total 12</div><div class="line">drwxr-xr-x.  2 root root    6 Aug 12  2015 adm</div><div class="line">drwxr-xr-x.  6 root root   55 Apr 26 10:35 cache</div><div class="line">drwxr-xr-x.  2 root root    6 Nov 21  2015 crash</div><div class="line">drwxr-xr-x.  3 root root   32 Apr 26 10:35 db</div></pre></td></tr></table></figure></p>
<p>&ensp;&ensp;&ensp;&ensp;方式二：</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;COMMAND &gt;/PATH/TO/SOMEFILE 2&gt;&amp;1</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;COMMAND &gt;&gt;/PATH/TO/SOMEFILE 2&gt;&amp;1<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># ls /varr &gt;/tmp/var.out 2&gt;&amp;1</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /tmp/var.out </span></div><div class="line">ls: cannot access /varr: No such file or directory</div><div class="line">[root@centos7 ~]<span class="comment"># ls /var &gt;&gt;/tmp/var.out 2&gt;&amp;1</span></div><div class="line">[root@centos7 ~]<span class="comment"># cat /tmp/var.out </span></div><div class="line">ls: cannot access /varr: No such file or directory</div><div class="line">adm</div><div class="line">cache</div><div class="line">crash</div><div class="line">db</div><div class="line">empty</div></pre></td></tr></table></figure></p>
<h5 id="ensp-ensp-输入重定向："><a href="#ensp-ensp-输入重定向：" class="headerlink" title="&ensp;&ensp;输入重定向："></a>&ensp;&ensp;输入重定向：</h5><p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&lt; （标准输出）</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&lt;&lt; （Here document）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># tr 'a-z' 'A-Z' &lt;/etc/issue</span></div><div class="line">\S</div><div class="line">KERNEL \R ON AN \M</div><div class="line"></div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/issue</span></div><div class="line">\S</div><div class="line">Kernel \r on an \m</div></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># tr -d 'a-l' &lt;/etc/issue</span></div><div class="line">\S</div><div class="line">Krn \r on n \m</div><div class="line"></div><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/issue</span></div><div class="line">\S</div><div class="line">Kernel \r on an \m</div></pre></td></tr></table></figure>
<p>Here document的用法：</p>
<p>&ensp;&ensp;&ensp;&ensp;cat &lt;&lt; EOF</p>
<p>&ensp;&ensp;&ensp;&ensp;cat &gt; /PATH/TO/SOMEFILE &lt;&lt;EOF</p>
<p>&ensp;&ensp;&ensp;&ensp;EOF：为结束标识符<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># cat &lt;&lt; EOF</span></div><div class="line">&gt; how are you</div><div class="line">&gt; what are you doning</div><div class="line">&gt; EOF</div><div class="line">how are you</div><div class="line">what are you doning</div></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># cat &gt;/tmp/eof.out &lt;&lt;EOF</span></div><div class="line">&gt; how are you</div><div class="line">&gt; what are you doning here</div><div class="line">&gt; EOF</div><div class="line">[root@centos7 ~]<span class="comment"># cat /tmp/eof.out </span></div><div class="line">how are you</div><div class="line">what are you doning here</div></pre></td></tr></table></figure>
<h2 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h2><p>管道是一个连接程序，实现将前一个命令的输出作为后一个命令的输入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># cat /etc/fstab |tr 'a-z' 'A-Z'</span></div><div class="line"></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># /ETC/FSTAB</span></div><div class="line"><span class="comment"># CREATED BY ANACONDA ON WED APR 26 10:31:47 2017</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># ACCESSIBLE FILESYSTEMS, BY REFERENCE, ARE MAINTAINED UNDER '/DEV/DISK'</span></div><div class="line"><span class="comment"># SEE MAN PAGES FSTAB(5), FINDFS(8), MOUNT(8) AND/OR BLKID(8) FOR MORE INFO</span></div><div class="line"><span class="comment">#</span></div><div class="line">/DEV/MAPPER/VGOS-ROOT   /                       XFS     DEFAULTS        0 0</div><div class="line">UUID=224A4923-A78D-4BDE-B962-AA921A15DB50 /BOOT                   XFS     DEFAULTS        0 0</div><div class="line">UUID=3F6338AB-2C10-422C-9A5C-6A783C5795E8 SWAP                    SWAP    DEFAULTS        0 0</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">command</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/30/linux shell特性之IO重写向和管道/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-linux shell特性之通配符" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/30/linux shell特性之通配符/">glob通配符详解</a>
    </h1>
  

        
        <a href="/2017/04/30/linux shell特性之通配符/" class="archive-article-date">
  	<time datetime="2017-04-30T13:34:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-30</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="linux通配符"><a href="#linux通配符" class="headerlink" title="linux通配符"></a>linux通配符</h2><table>
<thead>
<tr>
<th style="text-align:left">通配符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">匹配任意长度的任意字符</td>
</tr>
<tr>
<td style="text-align:left">？</td>
<td style="text-align:left">匹配任意单个字符</td>
</tr>
<tr>
<td style="text-align:left">[]</td>
<td style="text-align:left">匹配指定范围之内的任意字符</td>
</tr>
<tr>
<td style="text-align:left">[^]</td>
<td style="text-align:left">匹配指定范围之外的任意字符</td>
</tr>
<tr>
<td style="text-align:left">[abc]</td>
<td style="text-align:left">匹配abc三个字母</td>
</tr>
<tr>
<td style="text-align:left">[a-m]</td>
<td style="text-align:left">匹配a-m所有字母</td>
</tr>
<tr>
<td style="text-align:left">[a-z]</td>
<td style="text-align:left">匹配任意小字字母</td>
</tr>
<tr>
<td style="text-align:left">[A-Z]</td>
<td style="text-align:left">匹配任意大写字母</td>
</tr>
<tr>
<td style="text-align:left">[0-9]</td>
<td style="text-align:left">匹配任意数字</td>
</tr>
<tr>
<td style="text-align:left">[a-z][A-Z]</td>
<td style="text-align:left">匹配任意字母</td>
</tr>
<tr>
<td style="text-align:left">[0-9][a-z][A-Z]</td>
<td style="text-align:left">匹配任意数字和字母</td>
</tr>
<tr>
<td style="text-align:left">[[:sapce:]]</td>
<td style="text-align:left">匹配任意空白字符</td>
</tr>
<tr>
<td style="text-align:left">[[:punct:]]</td>
<td style="text-align:left">匹配任意标点符号</td>
</tr>
<tr>
<td style="text-align:left">[[:lower:]]</td>
<td style="text-align:left">匹配任意小写字母</td>
</tr>
<tr>
<td style="text-align:left">[[:upper:]]</td>
<td style="text-align:left">匹配任意大写字母</td>
</tr>
<tr>
<td style="text-align:left">[[:alpha:]]</td>
<td style="text-align:left">匹配任意字母</td>
</tr>
<tr>
<td style="text-align:left">[[:digit:]]</td>
<td style="text-align:left">匹配任意数字</td>
</tr>
<tr>
<td style="text-align:left">[[:alnum:]]</td>
<td style="text-align:left">匹配任意数字和字母</td>
</tr>
</tbody>
</table>
<h3 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h3><p>实例1：</p>
<p>显示/var目录下所有以l开头，以一个小写字母结尾，且中间出现至少一位数字的文件或目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># touch /var/l123456abc</span></div><div class="line">[root@centos7 ~]<span class="comment"># ls -d /var/l*[0-9]*[a-z]</span></div><div class="line">/var/l123456abc</div></pre></td></tr></table></figure></p>
<p>实例2：</p>
<p>显示/etc目录下以任意一位数字开头且以非数字结尾的文件或目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># touch /etc/123abc</span></div><div class="line">[root@centos7 ~]<span class="comment"># ls -d /etc/[0-9]*[^0-9]</span></div><div class="line">/etc/123abc</div></pre></td></tr></table></figure></p>
<p>实例3：</p>
<p>显示/etc目录下以非字母开头,后面跟一个字母及其它任意长度字符的文件或目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># touch /etc/1&#123;abc,abc1234&#125;</span></div><div class="line">[root@centos7 ~]<span class="comment"># ls -d /etc/[^[:alpha:]][[:alpha:]]*</span></div><div class="line">/etc/1abc  /etc/1abc1234</div></pre></td></tr></table></figure></p>
<p>实例4：</p>
<p>复制/etc目录下所有以m开头，以非数字结尾的文件或目录至/tmp/magedu.com目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># mkdir /tmp/magedu.com</span></div><div class="line">[root@centos7 ~]<span class="comment"># cp -a /etc/m*[^0-9] /tmp/magedu.com/</span></div><div class="line">[root@centos7 ~]<span class="comment"># ls /tmp/magedu.com/</span></div><div class="line">machine-id  mail.rc     man_db.conf  modprobe.d      motd  my.cnf</div><div class="line">magic       makedumpfile.conf.sample  mke2fs.conf  modules-load.d  mtab  my.cnf.d</div></pre></td></tr></table></figure></p>
<p>实例5：</p>
<p>复制/usr/share/man目录下所有以man开头后跟一个数字结尾的文件或目录至/tmp/man目录下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># mkdir /tmp/man</span></div><div class="line">[root@centos7 ~]<span class="comment"># cp -a /usr/share/man/man[0-9] /tmp/man</span></div><div class="line">[root@centos7 ~]<span class="comment"># ls /tmp/man/</span></div><div class="line">man1  man2  man3  man4  man5  man6  man7  man8  man9</div></pre></td></tr></table></figure></p>
<p>实例6：</p>
<p>复制/etc目录下所有以.conf结尾且以m,n,r,p开头的文件或目录到/tmp/conf.d目录下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># mkdir /tmp/conf.d</span></div><div class="line">[root@centos7 ~]<span class="comment"># cp -a /etc/[m,n,r,p]*.conf /tmp/conf.d/</span></div><div class="line">[root@centos7 ~]<span class="comment"># ls /tmp/conf.d/</span></div><div class="line">man_db.conf  mke2fs.conf  nsswitch.conf  resolv.conf  rsyncd.conf  rsyslog.conf</div></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">command</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/30/linux shell特性之通配符/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-linux之man帮助" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/29/linux之man帮助/">linux命令帮助使用</a>
    </h1>
  

        
        <a href="/2017/04/29/linux之man帮助/" class="archive-article-date">
  	<time datetime="2017-04-29T10:02:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-29</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="内部命令"><a href="#内部命令" class="headerlink" title="内部命令"></a>内部命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">help</span> COMMAND</div></pre></td></tr></table></figure>
<p>如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># help cd</span></div><div class="line"><span class="built_in">cd</span>: <span class="built_in">cd</span> [-L|[-P [<span class="_">-e</span>]]] [dir]</div><div class="line">    Change the shell working directory.</div></pre></td></tr></table></figure></p>
<h3 id="外部命令"><a href="#外部命令" class="headerlink" title="外部命令"></a>外部命令</h3><h4 id="命令自带简要格式的使用帮助"><a href="#命令自带简要格式的使用帮助" class="headerlink" title="命令自带简要格式的使用帮助"></a>命令自带简要格式的使用帮助</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ COMMAND --help</div></pre></td></tr></table></figure>
<p>如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># useradd --help</span></div><div class="line">Usage: useradd [options] LOGIN</div><div class="line">       useradd -D</div><div class="line">       useradd -D [options]</div><div class="line"></div><div class="line">Options:</div><div class="line">  -b, --base-dir BASE_DIR       base directory <span class="keyword">for</span> the home directory of the</div><div class="line">                                new account</div><div class="line">  -c, --comment COMMENT         GECOS field of the new account</div><div class="line">  <span class="_">-d</span>, --home-dir HOME_DIR       home directory of the new account</div><div class="line">  -D, --defaults                <span class="built_in">print</span> or change default useradd configuration</div><div class="line">  <span class="_">-e</span>, --expiredate EXPIRE_DATE  expiration date of the new account</div><div class="line">  <span class="_">-f</span>, --inactive INACTIVE       password inactivity period of the new account</div><div class="line">  -g, --gid GROUP               name or ID of the primary group of the new</div><div class="line">                                account</div><div class="line">  -G, --groups GROUPS           list of supplementary groups of the new</div><div class="line">                                account</div><div class="line">  -h, --help                    display this <span class="built_in">help</span> message and <span class="built_in">exit</span></div><div class="line">  -k, --skel SKEL_DIR           use this alternative skeleton directory</div><div class="line">  -K, --key KEY=VALUE           override /etc/login.defs defaults</div><div class="line">  <span class="_">-l</span>, --no-log-init             <span class="keyword">do</span> not add the user to the lastlog and</div><div class="line">                                faillog databases</div><div class="line">  -m, --create-home             create the user<span class="string">'s home directory</span></div><div class="line">  -M, --no-create-home          do not create the user's home directory</div><div class="line">  -N, --no-user-group           <span class="keyword">do</span> not create a group with the same name as</div><div class="line">                                the user</div><div class="line">  -o, --non-unique              allow to create users with duplicate</div><div class="line">                                (non-unique) UID</div><div class="line">  -p, --password PASSWORD       encrypted password of the new account</div><div class="line">  -r, --system                  create a system account</div><div class="line">  -R, --root CHROOT_DIR         directory to chroot into</div><div class="line">  <span class="_">-s</span>, --shell SHELL             login shell of the new account</div><div class="line">  -u, --uid UID                 user ID of the new account</div><div class="line">  -U, --user-group              create a group with the same name as the user</div><div class="line">  -Z, --selinux-user SEUSER     use a specific SEUSER <span class="keyword">for</span> the SELinux user mapping</div></pre></td></tr></table></figure></p>
<h4 id="使用man手册"><a href="#使用man手册" class="headerlink" title="使用man手册"></a>使用man手册</h4><p>&ensp;&ensp;说明：man手册是压缩格式的文件，有章节之分</p>
<p>&ensp;&ensp;如：/usr/share/man/man1,man2….</p>
<p>&ensp;&ensp;&ensp;&ensp; man1：用户命令</p>
<p>&ensp;&ensp;&ensp;&ensp; man2：系统调用</p>
<p>&ensp;&ensp;&ensp;&ensp; man3：C库调用</p>
<p>&ensp;&ensp;&ensp;&ensp; man4：设备文件及特殊文件</p>
<p>&ensp;&ensp;&ensp;&ensp; man5：文件格式：配置文件格式说明</p>
<p>&ensp;&ensp;&ensp;&ensp; man6：游戏使用帮助</p>
<p>&ensp;&ensp;&ensp;&ensp; man7：杂项</p>
<p>&ensp;&ensp;&ensp;&ensp; man8：管理工具及守护进程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ man COMMAND</div></pre></td></tr></table></figure>
<p>如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># man useradd</span></div><div class="line"></div><div class="line"></div><div class="line">USERADD(8)                 System Management Commands                USERADD(8)</div><div class="line"></div><div class="line">NAME</div><div class="line">       useradd - create a new user or update default new user information</div><div class="line"></div><div class="line">SYNOPSIS</div><div class="line">       useradd [options] LOGIN</div><div class="line"></div><div class="line">       useradd -D</div><div class="line"></div><div class="line">       useradd -D [options]</div><div class="line"></div><div class="line">DESCRIPTION</div><div class="line">       When invoked without the -D option, the useradd <span class="built_in">command</span> creates a new</div><div class="line">       user account using the values specified on the <span class="built_in">command</span> line plus the</div><div class="line">       default values from the system. Depending on <span class="built_in">command</span> line options, the</div><div class="line">       useradd <span class="built_in">command</span> will update system files and may also create the new</div><div class="line">       user<span class="string">'s home directory and copy initial files.</span></div><div class="line"></div><div class="line">       By default, a group will also be created for the new user (see -g, -N,</div><div class="line">       -U, and USERGROUPS_ENAB).</div><div class="line"></div><div class="line">OPTIONS</div><div class="line">       The options which apply to the useradd command are:</div></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ man chapter COMMAND</div></pre></td></tr></table></figure>
<p>如:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line">[root@CentOS6 ~]<span class="comment"># man 5 passwd</span></div><div class="line"></div><div class="line">PASSWD(5)                  Linux Programmer?. Manual                 PASSWD(5)</div><div class="line"></div><div class="line">NAME</div><div class="line">       passwd - password file</div><div class="line"></div><div class="line">DESCRIPTION</div><div class="line">       Passwd  is  a  text  file,  that  contains  a list of the system?.</div><div class="line">       accounts, giving <span class="keyword">for</span> each account  some  useful  information  like</div><div class="line">       user  ID,  group  ID,  home directory, shell, etc.  Often, it also</div><div class="line">       contains the encrypted passwords <span class="keyword">for</span> each account.  It should have</div><div class="line">       general  <span class="built_in">read</span> permission (many utilities, like ls(1) use it to map</div><div class="line">       user IDs to usernames), but write access only <span class="keyword">for</span> the superuser.</div><div class="line"></div><div class="line">       In the good old days there was no great problem with this  general</div><div class="line">       <span class="built_in">read</span>  permission.   Everybody  could <span class="built_in">read</span> the encrypted passwords,</div><div class="line">       but the hardware was too slow to crack a well-chosen password, and</div><div class="line">       moreover, the basic assumption used to be that of a friendly user-</div><div class="line">       community.  These days many people run some version of the  shadow</div><div class="line">       password  suite,  <span class="built_in">where</span>  /etc/passwd  has <span class="string">"x"</span> instead of encrypted</div><div class="line">       passwords, and the encrypted passwords are <span class="keyword">in</span> /etc/shadow <span class="built_in">which</span> is</div><div class="line">       readable by the superuser only.</div><div class="line"></div><div class="line">       If   the   encrypted   password,  whether  <span class="keyword">in</span>  /etc/passwd  or  <span class="keyword">in</span></div><div class="line">       /etc/shadow, is an empty string, login  is  allowed  without  even</div><div class="line">       asking <span class="keyword">for</span> a password.  Note that this functionality may be inten-</div><div class="line">       tionally disabled <span class="keyword">in</span> applications, or  configurable  (<span class="keyword">for</span>  example</div><div class="line">       using the <span class="string">"nullok"</span> or <span class="string">"nonull"</span> arguments to pam_unix.so).</div><div class="line"></div><div class="line">       If  the  encrypted  password <span class="keyword">in</span> /etc/passwd is <span class="string">"*NP*"</span> (without the</div><div class="line">       quotes), the shadow record should be obtained from a NIS+  server.</div><div class="line"></div><div class="line">       Regardless  of  whether  shadow passwords are used, many sysadmins</div><div class="line">       use an asterisk <span class="keyword">in</span> the encrypted password field to make sure  that</div><div class="line">       this  user  can not authenticate him- or herself using a password.</div><div class="line">       (But see the Notes below.)</div><div class="line"></div><div class="line">       If you create a new login, first put an asterisk <span class="keyword">in</span>  the  password</div><div class="line">       field, <span class="keyword">then</span> use passwd(1) to <span class="built_in">set</span> it.</div><div class="line"></div><div class="line">       There is one entry per line, and each line has the format:</div><div class="line"></div><div class="line">              account:password:UID:GID:GECOS:directory:shell</div><div class="line"></div><div class="line">       The field descriptions are:</div><div class="line"></div><div class="line">              account   the  name  of  the user on the system.  It should</div><div class="line">                        not contain capital letters.</div><div class="line"></div><div class="line">              password  the encrypted user password, an asterisk (*),  or</div><div class="line">                        the  letter  <span class="string">'x'</span>.  (See pwconv(8) <span class="keyword">for</span> an explana-</div><div class="line">                        tion of <span class="string">'x'</span>.)</div><div class="line"></div><div class="line">              UID       the numerical user ID.</div><div class="line"></div><div class="line">              GID       the numerical primary group ID <span class="keyword">for</span> this user.</div><div class="line"></div><div class="line">              GECOS     This field is optional and only used <span class="keyword">for</span> informa-</div><div class="line">                        tional  purposes.   Usually, it contains the full</div><div class="line">                        username.  GECOS means General  Electric  Compre-</div><div class="line">                        hensive  Operating System, <span class="built_in">which</span> has been renamed</div><div class="line">                        to GCOS when GE?. large systems division was sold</div><div class="line">                        to   Honeywell.   Dennis  Ritchie  has  reported:</div><div class="line">                        <span class="string">"Sometimes we sent printer output or  batch  jobs</span></div><div class="line">                        to the GCOS machine.  The gcos field in the pass-</div><div class="line">                        word file was a place to  stash  the  information</div><div class="line">                        for the <span class="variable">$IDENTcard</span>.  Not elegant."</div><div class="line"></div><div class="line">              directory the user?. <span class="variable">$HOME</span> directory.</div><div class="line"></div><div class="line">              shell     the  program  to  run  at  login  (<span class="keyword">if</span>  empty, use</div><div class="line">                        /bin/sh).  If <span class="built_in">set</span> to a  non-existing  executable,</div><div class="line">                        the   user   will  be  unable  to  login  through</div><div class="line">                        login(1).</div><div class="line"></div><div class="line">FILES</div><div class="line">       /etc/passwd</div><div class="line"></div><div class="line">NOTES</div><div class="line">       If you want to create user groups, their GIDs must  be  equal  and</div><div class="line">       there must be an entry <span class="keyword">in</span> /etc/group, or no group will exist.</div><div class="line"></div><div class="line">       If  the encrypted password is <span class="built_in">set</span> to an asterisk, the user will be</div><div class="line">       unable  to  login  using  login(1),  but  may  still  login  using</div><div class="line">       rlogin(1),  run  existing  processes and initiate new ones through</div><div class="line">       rsh(1), cron(8), at(1), or mail filters, etc.  Trying to  lock  an</div><div class="line">       account  by simply changing the shell field yields the same result</div><div class="line">       and additionally allows the use of su(1).</div><div class="line"></div><div class="line">SEE ALSO</div><div class="line">       login(1), passwd(1), su(1),  getpwent(3),  getpwnam(3),  group(5),</div><div class="line">       shadow(5)</div><div class="line"></div><div class="line">COLOPHON</div><div class="line">       This  page is part of release 3.22 of the Linux man-pages project.</div><div class="line">       A description of the  project,  and  information  about  reporting</div><div class="line">       bugs, can be found at http://www.kernel.org/doc/man-pages/.</div><div class="line"></div><div class="line">Linux                             1998-01-05                         PASSWD(5)</div></pre></td></tr></table></figure></p>
<p>查看某个命令的相关章节：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># whatis useradd</span></div><div class="line">useradd (8)          - create a new user or update default new user information</div></pre></td></tr></table></figure></p>
<h3 id="man手册打开后的操作方法"><a href="#man手册打开后的操作方法" class="headerlink" title="man手册打开后的操作方法"></a>man手册打开后的操作方法</h3><p>翻屏：</p>
<p>&ensp;&ensp;&ensp;&ensp;空格键：向文件尾部翻一屏</p>
<p>&ensp;&ensp;&ensp;&ensp;b：向文件首部翻一屏</p>
<p>&ensp;&ensp;&ensp;&ensp;ctrl + d：向文件尾部翻半屏</p>
<p>&ensp;&ensp;&ensp;&ensp;ctrl + u：向文件首部翻半屏</p>
<p>&ensp;&ensp;&ensp;&ensp;加车键：向文件尾部翻一行</p>
<p>&ensp;&ensp;&ensp;&ensp;K：向文件首部翻一行</p>
<p>&ensp;&ensp;&ensp;&ensp;G：跳转至最后一行</p>
<p>&ensp;&ensp;&ensp;&ensp;#G：跳转至指定行#</p>
<p>文本搜索：</p>
<p>&ensp;&ensp;&ensp;&ensp;/keyword：从文件首部向文件尾部依次查找</p>
<p>&ensp;&ensp;&ensp;&ensp;?keyword：从文件尾部向文件首部依次查找</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;n：与查找命令方向相同方向查找</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;N：与查找命令方向相反方向查找</p>
<p>退出：</p>
<p>&ensp;&ensp;&ensp;&ensp;q</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">command</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/29/linux之man帮助/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
    <article id="post-linux命令history" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/29/linux命令history/">history命令详解</a>
    </h1>
  

        
        <a href="/2017/04/29/linux命令history/" class="archive-article-date">
  	<time datetime="2017-04-29T08:34:22.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-04-29</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>History命令历史：shell进程在其会话活动中用于保存当前用户执行过的命令。</p>
<p>注意：history记录的命令首先是保存在内存中，当用户退出当前shell后会自动把保存在内存中的历史命令保存到命令历史文件中。</p>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><h4 id="一、定制history的功能"><a href="#一、定制history的功能" class="headerlink" title="一、定制history的功能"></a>一、定制history的功能</h4><p>HISTSIZE：shell进程可保存的命令历史条数<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># echo $HISTSIZE</span></div><div class="line">1000</div></pre></td></tr></table></figure></p>
<p>HISTFILE：持久保存命令历史的文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># echo $HISTFILE</span></div><div class="line">/root/.bash_history</div></pre></td></tr></table></figure></p>
<p>HISTFILESIZE：命令历史文件的大小<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@centos7 ~]<span class="comment"># echo $HISTFILESIZE</span></div><div class="line">1000</div></pre></td></tr></table></figure></p>
<h4 id="二、命令选项"><a href="#二、命令选项" class="headerlink" title="二、命令选项"></a>二、命令选项</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">history</span>: <span class="built_in">history</span> [-c] [<span class="_">-d</span> offset] [n] or <span class="built_in">history</span> -anrw [filename]</div></pre></td></tr></table></figure>
<p>   -c  &ensp;&ensp;&ensp;&ensp;清空命令历史</p>
<p>   -d  &ensp;&ensp;&ensp;&ensp;offset 删除指定命令历史条目或一段条目</p>
<pre><code>如: history -d 600 5 (600:表示第600条，5表示向后5条)
</code></pre><p>   -r  &ensp;&ensp;&ensp;&ensp;从命令历史文件中读取命令历史到内存中</p>
<p>   -w  &ensp;&ensp;&ensp;&ensp;把命令历史从内存中追加到命令历史文件中</p>
<p>   history # &ensp;&ensp;&ensp;&ensp;显示最近#条命令</p>
<h4 id="三、调用命令历史"><a href="#三、调用命令历史" class="headerlink" title="三、调用命令历史"></a>三、调用命令历史</h4><p>   !# &ensp;&ensp;&ensp;&ensp;再次执行命令历史列表中的第#条命令</p>
<p>   !! &ensp;&ensp;&ensp;&ensp;再一次执行上一条命令</p>
<p>   !string &ensp;&ensp;&ensp;&ensp;再一次执行命令历史列表中最近一个以string开头的命令</p>
<h6 id="调用上一条命令的最后一个磁参数"><a href="#调用上一条命令的最后一个磁参数" class="headerlink" title="调用上一条命令的最后一个磁参数"></a>调用上一条命令的最后一个磁参数</h6><p>快捷键：ESC ‘.’ (先按ESC键松开再按’.’)</p>
<p>字符串：!$</p>
<h4 id="四、控制命令历史记录的方式"><a href="#四、控制命令历史记录的方式" class="headerlink" title="四、控制命令历史记录的方式"></a>四、控制命令历史记录的方式</h4><p>环境变量：HISTCONTROL</p>
<p>   ignoredups：忽略重复的命令</p>
<p>   ignorespace：忽略以空白字符开头的命令</p>
<p>   ingoreboth：以上两个同时生效</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">command</a>
        		</li>
      		
		</ul>
	</div>

      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/04/29/linux命令history/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>





  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/11/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Jack_zhou
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),g=e(75),m=r(g),w=e(70);l(),(0,w.addLoadEvent)(function(){m.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),g=x[f],m=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&m&&void 0!==m[a],s&&a in x||(l=s?m[a]:e[a],x[a]=d&&"function"!=typeof m[a]?e[a]:h&&s?i(l,r):b&&m[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&g&&!g[a]&&u(g,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,g,m,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=g==h,M=!1,A=t.prototype,T=A[p]||A[v]||g&&A[g],L=T||j(g),N=g?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,g)if(O={values:E?L:j(h),keys:m?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),g=e(10),m=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),g(t),n=w(n,!0),g(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){g(t);for(var e,r=b(n=m(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=m(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(m(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:m(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.f6a68c.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">linux启动流程</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">Docker</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">HAProxy</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Cluster</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">MariaDB(MySQL)</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">NoSQL-MongoDB</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">linux安装</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Python3</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">NoSQL</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">TCPIP</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">web services</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">varnish</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">linux服务</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">LAMP</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">command</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">kernel</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">shell脚本编程</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">压缩和归档</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">vim</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">linux中文本处理工具</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">liunx文件共享服务</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">iptables</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">system用户管理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">zabbix</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">system系统管理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">软件包管理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">网络管理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">计划任务</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">运维工具</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">进程管理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">tomcat</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">MemCached</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Nginx</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">分布式存储</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">加密解密、数字签名、SSL、CA</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Virtulization</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>